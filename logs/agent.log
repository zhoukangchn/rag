2025-07-05 00:07:33.452 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-07-05 00:07:33.489 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 28632 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:07:33.490 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:07:33.490 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:07:33.528 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-07-05 00:07:33.528 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-07-05 00:07:34.750 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:07:34.767 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:07:34.769 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:07:34.769 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:07:34.821 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:07:34.822 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1294 ms
2025-07-05 00:07:35.348 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 00:07:35.387 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 00:07:35.405 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 00:07:35.425 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 00:07:35.475 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 00:07:35.491 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 00:07:35.492 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 00:07:35.492 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 00:07:35.494 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 00:07:35.657 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-05 00:07:35.801 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-07-05 00:07:35.803 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-05 00:07:35.810 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-07-05 00:07:35.911 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 00:07:35.928 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 00:07:35.950 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-07-05 00:07:35.960 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 2.99 seconds (process running for 3.339)
2025-07-05 00:09:36.419 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 00:09:36.425 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 00:09:36.433 [SpringApplicationShutdownHook] WARN  o.s.beans.factory.support.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-07-05 00:09:36.434 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-05 00:09:36.435 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-05 00:09:38.478 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-07-05 00:09:38.515 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:09:38.516 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:09:38.516 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:09:38.559 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-07-05 00:09:38.559 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-07-05 00:09:39.851 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:09:39.866 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:09:39.868 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:09:39.868 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:09:39.911 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:09:39.913 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1352 ms
2025-07-05 00:09:40.432 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 00:09:40.469 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 00:09:40.488 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 00:09:40.510 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 00:09:40.560 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 00:09:40.578 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 00:09:40.580 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 00:09:40.580 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 00:09:40.581 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 00:09:40.707 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-05 00:09:40.841 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-07-05 00:09:40.843 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-05 00:09:40.850 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-07-05 00:09:40.943 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 00:09:40.958 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 00:09:40.979 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 00:09:40.989 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 3.022 seconds (process running for 3.362)
2025-07-05 00:10:18.486 [http-nio-8080-exec-2] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-05 00:10:18.486 [http-nio-8080-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-05 00:10:18.486 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-05 00:10:18.486 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-05 00:10:18.486 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-05 00:10:18.487 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@36b58010
2025-07-05 00:10:18.487 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@f3a6c89
2025-07-05 00:10:18.487 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-05 00:10:18.487 [http-nio-8080-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-05 00:10:18.494 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/ai/chat?message=%E4%BD%A0%E5%A5%BD", parameters={masked}
2025-07-05 00:10:18.503 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.agent.pipeline.controller.ChatController#chat(String)
2025-07-05 00:10:18.654 [http-nio-8080-exec-2] DEBUG org.springframework.web.client.DefaultRestClient - Writing [ChatCompletionRequest[messages=[ChatCompletionMessage[rawContent=你好, role=USER, name=null, toolCallId=null, toolCalls=null, refusal=null, audioOutput=null, annotations=null]], model=deepseek-reasoner, store=null, metadata=null, frequencyPenalty=null, logitBias=null, logprobs=null, topLogprobs=null, maxTokens=2048, maxCompletionTokens=null, n=null, outputModalities=null, audioParameters=null, presencePenalty=null, responseFormat=null, seed=null, serviceTier=null, stop=null, stream=false, streamOptions=null, temperature=0.7, topP=null, tools=null, toolChoice=null, parallelToolCalls=null, user=null, reasoningEffort=null, webSearchOptions=null]] as "application/json" with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-07-05 00:10:32.521 [http-nio-8080-exec-2] DEBUG org.springframework.web.client.DefaultRestClient - Reading to [org.springframework.ai.openai.api.OpenAiApi$ChatCompletion]
2025-07-05 00:10:32.534 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-07-05 00:10:32.535 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing ["你好呀！👋 很高兴见到你～我是你的AI助手，有什么我可以帮你的吗？无论是聊天、答疑、查资料，还是写点东西、出个主意，我都在线等你哦～😊 请讲吧！"]
2025-07-05 00:10:32.538 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-05 00:24:46.497 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 16 class path changes (0 additions, 8 deletions, 8 modifications)
2025-07-05 00:24:46.500 [Thread-11] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 00:24:46.501 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:24:46.506 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 00:24:46.506 [Thread-11] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 00:24:46.516 [Thread-11] WARN  o.s.beans.factory.support.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-07-05 00:24:46.517 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-05 00:24:46.519 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-05 00:24:46.901 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:24:46.902 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:24:46.902 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:24:47.715 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:24:47.718 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:24:47.718 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:24:47.722 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:24:47.765 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:24:47.765 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 856 ms
2025-07-05 00:24:48.065 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 00:24:48.078 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 00:24:48.082 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 00:24:48.088 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 00:24:48.095 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 00:24:48.110 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 00:24:48.110 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 00:24:48.111 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 00:24:48.111 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 00:24:48.174 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-07-05 00:24:48.177 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:testdb user=SA
2025-07-05 00:24:48.177 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-07-05 00:24:48.177 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-07-05 00:24:48.203 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 00:24:48.207 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 00:24:48.211 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 00:24:48.220 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 1.561 seconds (process running for 910.593)
2025-07-05 00:24:48.224 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 00:26:53.569 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 8 class path changes (0 additions, 0 deletions, 8 modifications)
2025-07-05 00:26:53.570 [Thread-13] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 00:26:53.571 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:26:53.580 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 00:26:53.581 [Thread-13] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 00:26:53.584 [Thread-13] WARN  o.s.beans.factory.support.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-07-05 00:26:53.584 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-07-05 00:26:53.585 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-07-05 00:26:53.751 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:26:53.751 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:26:53.751 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:26:54.317 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:26:54.318 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:26:54.319 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:26:54.319 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:26:54.372 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:26:54.372 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 617 ms
2025-07-05 00:26:54.530 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 00:26:54.547 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 00:26:54.549 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 00:26:54.555 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 00:26:54.605 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 00:26:54.607 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 00:26:54.608 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 00:26:54.608 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 00:26:54.609 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 00:26:54.670 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-07-05 00:26:54.673 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:testdb user=SA
2025-07-05 00:26:54.673 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-07-05 00:26:54.673 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-07-05 00:26:54.691 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 00:26:54.700 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 00:26:54.704 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 00:26:54.707 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 1.009 seconds (process running for 1037.08)
2025-07-05 00:26:54.720 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 00:27:51.807 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 8 class path changes (0 additions, 0 deletions, 8 modifications)
2025-07-05 00:27:51.808 [Thread-24] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 00:27:51.809 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:27:51.812 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 00:27:51.813 [Thread-24] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 00:27:51.815 [Thread-24] WARN  o.s.beans.factory.support.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-07-05 00:27:51.815 [Thread-24] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-07-05 00:27:51.816 [Thread-24] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-07-05 00:27:51.960 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:27:51.960 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:27:51.960 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:27:52.486 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:27:52.487 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:27:52.487 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:27:52.488 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:27:52.509 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:27:52.509 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 544 ms
2025-07-05 00:27:52.601 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 00:27:52.608 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 00:27:52.611 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 00:27:52.614 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 00:27:52.620 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 00:27:52.623 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 00:27:52.623 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 00:27:52.623 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 00:27:52.624 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 00:27:52.671 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-07-05 00:27:52.675 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:testdb user=SA
2025-07-05 00:27:52.675 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-07-05 00:27:52.675 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-07-05 00:27:52.688 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 00:27:52.691 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 00:27:52.697 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 00:27:52.702 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.797 seconds (process running for 1095.074)
2025-07-05 00:27:52.703 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 00:29:17.564 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 8 class path changes (0 additions, 0 deletions, 8 modifications)
2025-07-05 00:29:17.566 [Thread-34] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 00:29:17.566 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:29:17.569 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 00:29:17.570 [Thread-34] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 00:29:17.571 [Thread-34] WARN  o.s.beans.factory.support.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-07-05 00:29:17.571 [Thread-34] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-07-05 00:29:17.572 [Thread-34] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-07-05 00:29:17.664 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:29:17.664 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:29:17.664 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:29:17.890 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:29:17.891 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:29:17.891 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:29:17.891 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:29:17.901 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:29:17.901 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 235 ms
2025-07-05 00:29:17.948 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 00:29:17.951 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 00:29:17.952 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 00:29:17.954 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 00:29:17.956 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 00:29:17.956 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 00:29:17.957 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 00:29:17.957 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 00:29:17.957 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 00:29:17.974 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-07-05 00:29:17.976 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:testdb user=SA
2025-07-05 00:29:17.976 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-07-05 00:29:17.976 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-07-05 00:29:17.981 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 00:29:17.983 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 00:29:17.984 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 00:29:17.987 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.351 seconds (process running for 1180.359)
2025-07-05 00:29:17.988 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 00:29:19.432 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 23 class path changes (23 additions, 0 deletions, 0 modifications)
2025-07-05 00:29:19.433 [Thread-44] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 00:29:19.433 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:29:19.437 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 00:29:19.437 [Thread-44] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 00:29:19.438 [Thread-44] WARN  o.s.beans.factory.support.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-07-05 00:29:19.438 [Thread-44] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-07-05 00:29:19.439 [Thread-44] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-07-05 00:29:19.516 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:29:19.516 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:29:19.516 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:29:19.776 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:29:19.776 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:29:19.777 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:29:19.777 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:29:19.786 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:29:19.786 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 268 ms
2025-07-05 00:29:19.856 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-07-05 00:29:19.866 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn50: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 00:29:19.866 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-07-05 00:29:19.867 [restartedMain] ERROR com.zaxxer.hikari.HikariConfig - Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@36baf30c
2025-07-05 00:29:19.868 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
2025-07-05 00:29:19.869 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-07-05 00:29:19.869 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-07-05 00:29:19.869 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-05 00:29:19.873 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 00:29:19.888 [restartedMain] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:489)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.example.agent.app.AgentApplication.main(AgentApplication.java:25)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:199)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:168)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 24 common frames omitted
Caused by: java.lang.RuntimeException: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at com.zaxxer.hikari.HikariConfig.setDriverClassName(HikariConfig.java:514)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperty.set(DataSourceBuilder.java:478)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperties.set(DataSourceBuilder.java:370)
	at org.springframework.boot.jdbc.DataSourceBuilder.build(DataSourceBuilder.java:185)
	at com.example.agent.knowledge.config.DataSourceConfig.vectorDataSource(DataSourceConfig.java:74)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.CGLIB$vectorDataSource$4(<generated>)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.vectorDataSource(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:171)
	... 27 common frames omitted
2025-07-05 00:31:02.299 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:31:02.299 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:31:02.299 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:31:02.503 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:31:02.503 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:31:02.503 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:31:02.503 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:31:02.514 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:31:02.514 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 213 ms
2025-07-05 00:31:02.561 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-07-05 00:31:02.562 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn51: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 00:31:02.563 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-07-05 00:31:02.564 [restartedMain] ERROR com.zaxxer.hikari.HikariConfig - Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@36baf30c
2025-07-05 00:31:02.564 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
2025-07-05 00:31:02.564 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-07-05 00:31:02.564 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-07-05 00:31:02.564 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-05 00:31:02.567 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 00:31:02.569 [restartedMain] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:489)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.example.agent.app.AgentApplication.main(AgentApplication.java:25)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:199)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:168)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 24 common frames omitted
Caused by: java.lang.RuntimeException: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at com.zaxxer.hikari.HikariConfig.setDriverClassName(HikariConfig.java:514)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperty.set(DataSourceBuilder.java:478)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperties.set(DataSourceBuilder.java:370)
	at org.springframework.boot.jdbc.DataSourceBuilder.build(DataSourceBuilder.java:185)
	at com.example.agent.knowledge.config.DataSourceConfig.vectorDataSource(DataSourceConfig.java:74)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.CGLIB$vectorDataSource$4(<generated>)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.vectorDataSource(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:171)
	... 27 common frames omitted
2025-07-05 00:32:21.039 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:32:21.039 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:32:21.039 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:32:21.235 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:32:21.235 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:32:21.235 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:32:21.237 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:32:21.246 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:32:21.247 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 206 ms
2025-07-05 00:32:21.288 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-07-05 00:32:21.288 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn52: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 00:32:21.289 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-07-05 00:32:21.289 [restartedMain] ERROR com.zaxxer.hikari.HikariConfig - Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@36baf30c
2025-07-05 00:32:21.290 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
2025-07-05 00:32:21.290 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-07-05 00:32:21.290 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-07-05 00:32:21.291 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-05 00:32:21.293 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 00:32:21.295 [restartedMain] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:489)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.example.agent.app.AgentApplication.main(AgentApplication.java:25)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:199)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:168)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 24 common frames omitted
Caused by: java.lang.RuntimeException: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at com.zaxxer.hikari.HikariConfig.setDriverClassName(HikariConfig.java:514)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperty.set(DataSourceBuilder.java:478)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperties.set(DataSourceBuilder.java:370)
	at org.springframework.boot.jdbc.DataSourceBuilder.build(DataSourceBuilder.java:185)
	at com.example.agent.knowledge.config.DataSourceConfig.vectorDataSource(DataSourceConfig.java:74)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.CGLIB$vectorDataSource$4(<generated>)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.vectorDataSource(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:171)
	... 27 common frames omitted
2025-07-05 00:33:15.401 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:33:15.401 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:33:15.401 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:33:15.560 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:33:15.560 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:15.560 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:33:15.561 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:33:15.568 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:33:15.568 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 166 ms
2025-07-05 00:33:15.607 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 00:33:15.610 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 00:33:15.611 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 00:33:15.612 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 00:33:15.614 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 00:33:15.615 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 00:33:15.615 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 00:33:15.615 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 00:33:15.615 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 00:33:15.629 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-07-05 00:33:15.631 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn53: url=jdbc:h2:mem:testdb user=SA
2025-07-05 00:33:15.631 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-07-05 00:33:15.631 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-07-05 00:33:15.636 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 00:33:15.638 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:15.640 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 00:33:15.641 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.259 seconds (process running for 1418.013)
2025-07-05 00:33:15.642 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 00:33:25.238 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2025-07-05 00:33:25.239 [Thread-54] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 00:33:25.239 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:25.241 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 00:33:25.241 [Thread-54] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:25.242 [Thread-54] WARN  o.s.beans.factory.support.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-07-05 00:33:25.242 [Thread-54] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-07-05 00:33:25.243 [Thread-54] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-07-05 00:33:25.323 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:33:25.323 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:33:25.323 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:33:25.487 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:33:25.488 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:25.488 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:33:25.488 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:33:25.497 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:33:25.497 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 172 ms
2025-07-05 00:33:25.533 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 00:33:25.536 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 00:33:25.538 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 00:33:25.539 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 00:33:25.541 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 00:33:25.542 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 00:33:25.542 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 00:33:25.542 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 00:33:25.542 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 00:33:25.558 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-07-05 00:33:25.560 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn63: url=jdbc:h2:mem:testdb user=SA
2025-07-05 00:33:25.560 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-07-05 00:33:25.560 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-07-05 00:33:25.565 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 00:33:25.568 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:25.569 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 00:33:25.571 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.266 seconds (process running for 1427.943)
2025-07-05 00:33:25.571 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 00:33:26.983 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-07-05 00:33:26.984 [Thread-91] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 00:33:26.984 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:26.986 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 00:33:26.986 [Thread-91] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:26.987 [Thread-91] WARN  o.s.beans.factory.support.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-07-05 00:33:26.987 [Thread-91] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-07-05 00:33:26.988 [Thread-91] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-07-05 00:33:27.067 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:33:27.067 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:33:27.067 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:33:27.221 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:33:27.221 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:27.221 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:33:27.221 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:33:27.229 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:33:27.229 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 160 ms
2025-07-05 00:33:27.262 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 00:33:27.265 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 00:33:27.265 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 00:33:27.267 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 00:33:27.268 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 00:33:27.269 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 00:33:27.269 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 00:33:27.269 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 00:33:27.269 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 00:33:27.284 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Starting...
2025-07-05 00:33:27.285 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-11 - Added connection conn73: url=jdbc:h2:mem:testdb user=SA
2025-07-05 00:33:27.285 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Start completed.
2025-07-05 00:33:27.285 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-07-05 00:33:27.290 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 00:33:27.292 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:27.294 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 00:33:27.295 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.247 seconds (process running for 1429.667)
2025-07-05 00:33:27.295 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 00:33:52.903 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 31 class path changes (22 additions, 0 deletions, 9 modifications)
2025-07-05 00:33:52.904 [Thread-101] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 00:33:52.904 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:52.906 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 00:33:52.907 [Thread-101] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:52.908 [Thread-101] WARN  o.s.beans.factory.support.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-07-05 00:33:52.908 [Thread-101] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown initiated...
2025-07-05 00:33:52.908 [Thread-101] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown completed.
2025-07-05 00:33:52.987 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:33:52.987 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:33:52.987 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:33:53.157 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:33:53.158 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:33:53.158 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:33:53.158 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:33:53.165 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:33:53.165 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 177 ms
2025-07-05 00:33:53.200 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Starting...
2025-07-05 00:33:53.201 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-12 - Added connection conn83: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 00:33:53.201 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Start completed.
2025-07-05 00:33:53.202 [restartedMain] ERROR com.zaxxer.hikari.HikariConfig - Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@36baf30c
2025-07-05 00:33:53.202 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
2025-07-05 00:33:53.202 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown initiated...
2025-07-05 00:33:53.202 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown completed.
2025-07-05 00:33:53.203 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-05 00:33:53.205 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 00:33:53.207 [restartedMain] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:489)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.example.agent.app.AgentApplication.main(AgentApplication.java:25)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:199)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:168)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 24 common frames omitted
Caused by: java.lang.RuntimeException: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at com.zaxxer.hikari.HikariConfig.setDriverClassName(HikariConfig.java:514)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperty.set(DataSourceBuilder.java:478)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperties.set(DataSourceBuilder.java:370)
	at org.springframework.boot.jdbc.DataSourceBuilder.build(DataSourceBuilder.java:185)
	at com.example.agent.knowledge.config.DataSourceConfig.vectorDataSource(DataSourceConfig.java:74)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.CGLIB$vectorDataSource$4(<generated>)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.vectorDataSource(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:171)
	... 27 common frames omitted
2025-07-05 00:35:49.744 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:35:49.744 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:35:49.744 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:35:49.912 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:35:49.913 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:35:49.913 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:35:49.913 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:35:49.924 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:35:49.924 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 179 ms
2025-07-05 00:35:49.944 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Starting...
2025-07-05 00:35:49.945 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-13 - Added connection conn84: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 00:35:49.945 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Start completed.
2025-07-05 00:35:49.975 [restartedMain] ERROR com.zaxxer.hikari.HikariConfig - Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@36baf30c
2025-07-05 00:35:49.976 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
2025-07-05 00:35:49.976 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown initiated...
2025-07-05 00:35:49.976 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown completed.
2025-07-05 00:35:49.976 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-05 00:35:49.978 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 00:35:49.980 [restartedMain] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:489)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.example.agent.app.AgentApplication.main(AgentApplication.java:25)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:199)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:168)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 24 common frames omitted
Caused by: java.lang.RuntimeException: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at com.zaxxer.hikari.HikariConfig.setDriverClassName(HikariConfig.java:514)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperty.set(DataSourceBuilder.java:478)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperties.set(DataSourceBuilder.java:370)
	at org.springframework.boot.jdbc.DataSourceBuilder.build(DataSourceBuilder.java:185)
	at com.example.agent.knowledge.config.DataSourceConfig.vectorDataSource(DataSourceConfig.java:74)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.CGLIB$vectorDataSource$4(<generated>)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.vectorDataSource(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:171)
	... 27 common frames omitted
2025-07-05 00:45:15.609 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:45:15.610 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:45:15.610 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:45:16.081 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalStateException: Cannot load configuration class: com.example.agent.knowledge.config.DataSourceConfig
2025-07-05 00:45:16.082 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 00:45:16.085 [restartedMain] ERROR org.springframework.boot.SpringApplication - Application run failed
java.lang.IllegalStateException: Cannot load configuration class: com.example.agent.knowledge.config.DataSourceConfig
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:503)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:311)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:153)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.example.agent.app.AgentApplication.main(AgentApplication.java:25)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.ClassNotFoundException: com.example.agent.knowledge.config.DataSourceConfig
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at org.springframework.util.ClassUtils.forName(ClassUtils.java:321)
	at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:503)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:499)
	... 15 common frames omitted
2025-07-05 00:45:18.798 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 16036 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:45:18.799 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:45:18.799 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:45:19.001 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:45:19.001 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:45:19.002 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:45:19.002 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:45:19.011 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:45:19.011 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 211 ms
2025-07-05 00:45:19.029 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Starting...
2025-07-05 00:45:19.030 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-14 - Added connection conn85: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 00:45:19.031 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Start completed.
2025-07-05 00:45:19.066 [restartedMain] ERROR com.zaxxer.hikari.HikariConfig - Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@36baf30c
2025-07-05 00:45:19.066 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
2025-07-05 00:45:19.066 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown initiated...
2025-07-05 00:45:19.066 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown completed.
2025-07-05 00:45:19.067 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-05 00:45:19.069 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 00:45:19.072 [restartedMain] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:489)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.example.agent.app.AgentApplication.main(AgentApplication.java:25)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:199)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:168)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 24 common frames omitted
Caused by: java.lang.RuntimeException: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at com.zaxxer.hikari.HikariConfig.setDriverClassName(HikariConfig.java:514)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperty.set(DataSourceBuilder.java:478)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperties.set(DataSourceBuilder.java:370)
	at org.springframework.boot.jdbc.DataSourceBuilder.build(DataSourceBuilder.java:185)
	at com.example.agent.knowledge.config.DataSourceConfig.vectorDataSource(DataSourceConfig.java:74)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.CGLIB$vectorDataSource$4(<generated>)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.vectorDataSource(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:171)
	... 27 common frames omitted
2025-07-05 00:46:34.657 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-07-05 00:46:34.693 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 12940 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:46:34.695 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:46:34.695 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:46:34.741 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-07-05 00:46:34.741 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-07-05 00:46:35.933 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:46:35.954 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:46:35.957 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:46:35.957 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:46:35.994 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:46:35.995 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1253 ms
2025-07-05 00:46:36.120 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-05 00:46:36.259 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 00:46:36.260 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-05 00:46:36.842 [restartedMain] ERROR com.zaxxer.hikari.HikariConfig - Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@36baf30c
2025-07-05 00:46:36.843 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
2025-07-05 00:46:36.843 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-05 00:46:36.845 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-05 00:46:36.848 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-05 00:46:36.858 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 00:46:36.878 [restartedMain] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'vectorDataSource' defined in class path resource [com/example/agent/knowledge/config/DataSourceConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:489)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.example.agent.app.AgentApplication.main(AgentApplication.java:25)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'vectorDataSource' threw exception with message: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:199)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:168)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 24 common frames omitted
Caused by: java.lang.RuntimeException: Failed to load driver class org.postgresql.Driver in either of HikariConfig class loader or Thread context classloader
	at com.zaxxer.hikari.HikariConfig.setDriverClassName(HikariConfig.java:514)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperty.set(DataSourceBuilder.java:478)
	at org.springframework.boot.jdbc.DataSourceBuilder$MappedDataSourceProperties.set(DataSourceBuilder.java:370)
	at org.springframework.boot.jdbc.DataSourceBuilder.build(DataSourceBuilder.java:185)
	at com.example.agent.knowledge.config.DataSourceConfig.vectorDataSource(DataSourceConfig.java:74)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.CGLIB$vectorDataSource$6(<generated>)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.example.agent.knowledge.config.DataSourceConfig$$SpringCGLIB$$0.vectorDataSource(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:171)
	... 27 common frames omitted
2025-07-05 00:52:43.938 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-07-05 00:52:43.979 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 31936 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:52:43.979 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:52:43.980 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:52:44.019 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-07-05 00:52:44.019 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-07-05 00:52:45.268 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:52:45.290 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:52:45.292 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:52:45.292 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:52:45.329 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:52:45.330 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1309 ms
2025-07-05 00:52:45.459 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-05 00:52:45.597 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 00:52:45.598 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-05 00:52:46.396 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 00:52:46.439 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 00:52:46.474 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 00:52:46.505 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 00:52:46.553 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 00:52:46.565 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 00:52:46.566 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 00:52:46.566 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 00:52:46.567 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 00:52:46.666 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-07-05 00:52:46.669 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn5: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 00:52:46.670 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-07-05 00:52:46.670 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 00:52:46.717 [restartedMain] WARN  o.s.b.d.autoconfigure.OptionalLiveReloadServer - Unable to start LiveReload server
2025-07-05 00:52:46.726 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 00:52:46.728 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-07-05 00:52:46.736 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-07-05 00:52:46.737 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-07-05 00:52:46.738 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-05 00:52:46.738 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-05 00:52:46.751 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 00:52:46.767 [restartedMain] ERROR o.s.b.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-07-05 00:53:33.035 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-07-05 00:53:33.070 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 22020 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 00:53:33.070 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 00:53:33.070 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 00:53:33.109 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-07-05 00:53:33.109 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-07-05 00:53:34.377 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 00:53:34.398 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 00:53:34.402 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 00:53:34.402 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 00:53:34.443 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 00:53:34.443 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1333 ms
2025-07-05 00:53:34.574 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-05 00:53:34.701 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 00:53:34.702 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-05 00:53:35.434 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 00:53:35.474 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 00:53:35.502 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 00:53:35.520 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 00:53:35.562 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 00:53:35.574 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 00:53:35.575 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 00:53:35.576 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 00:53:35.576 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 00:53:35.679 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-07-05 00:53:35.681 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn5: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 00:53:35.681 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-07-05 00:53:35.682 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 00:53:35.742 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 00:53:35.751 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 00:53:35.761 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 00:53:35.769 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 3.196 seconds (process running for 3.531)
2025-07-05 00:53:42.485 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-05 00:53:42.485 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-05 00:53:42.485 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-05 00:53:42.485 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-05 00:53:42.485 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-05 00:53:42.486 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@15faf3ca
2025-07-05 00:53:42.486 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@25828370
2025-07-05 00:53:42.486 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-05 00:53:42.486 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-05 00:53:42.493 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/ai/chat?message=%E4%BD%A0%E5%A5%BD", parameters={masked}
2025-07-05 00:53:42.502 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.agent.pipeline.controller.ChatController#chat(String)
2025-07-05 00:53:42.652 [http-nio-8080-exec-1] DEBUG org.springframework.web.client.DefaultRestClient - Writing [ChatCompletionRequest[messages=[ChatCompletionMessage[rawContent=你好, role=USER, name=null, toolCallId=null, toolCalls=null, refusal=null, audioOutput=null, annotations=null]], model=deepseek-reasoner, store=null, metadata=null, frequencyPenalty=null, logitBias=null, logprobs=null, topLogprobs=null, maxTokens=2048, maxCompletionTokens=null, n=null, outputModalities=null, audioParameters=null, presencePenalty=null, responseFormat=null, seed=null, serviceTier=null, stop=null, stream=false, streamOptions=null, temperature=0.7, topP=null, tools=null, toolChoice=null, parallelToolCalls=null, user=null, reasoningEffort=null, webSearchOptions=null]] as "application/json" with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-07-05 00:53:58.223 [http-nio-8080-exec-1] DEBUG org.springframework.web.client.DefaultRestClient - Reading to [org.springframework.ai.openai.api.OpenAiApi$ChatCompletion]
2025-07-05 00:53:58.254 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-07-05 00:53:58.256 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing ["你好呀！😊很高兴见到你～我是DeepSeek助手，随时准备为你解答问题、陪你聊天，或者帮你处理各种任务。无论你是想了解知识、需要工作学习上的帮助，还是单纯想聊聊天，我都在这里！<EOL><EOL>你想聊聊什么？或者 (truncated)..."]
2025-07-05 00:53:58.261 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-05 00:58:10.840 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 00:58:10.846 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 00:58:10.861 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-07-05 00:58:10.863 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-07-05 00:58:10.864 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-05 00:58:10.865 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-05 07:21:13.873 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-07-05 07:21:13.912 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:21:13.912 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:21:13.913 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:21:13.959 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-07-05 07:21:13.959 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-07-05 07:21:15.216 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:21:15.235 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:21:15.238 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:21:15.238 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:21:15.282 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:21:15.283 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1323 ms
2025-07-05 07:21:15.428 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-05 07:21:15.551 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:21:15.553 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-05 07:21:16.179 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:21:16.211 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:21:16.232 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:21:16.250 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:21:16.291 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:21:16.302 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:21:16.303 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:21:16.303 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:21:16.304 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:21:16.402 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-07-05 07:21:16.405 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn5: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:21:16.406 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-07-05 07:21:16.406 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:21:16.446 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:21:16.456 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:21:16.465 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:21:16.474 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 3.088 seconds (process running for 3.453)
2025-07-05 07:21:31.195 [http-nio-8080-exec-2] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-05 07:21:31.196 [http-nio-8080-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-05 07:21:31.196 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-05 07:21:31.196 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-05 07:21:31.196 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-05 07:21:31.197 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@169d15f5
2025-07-05 07:21:31.197 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@144638f9
2025-07-05 07:21:31.198 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-05 07:21:31.198 [http-nio-8080-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-05 07:21:31.210 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/ai/chat?message=%E4%BD%A0%E5%A5%BD", parameters={masked}
2025-07-05 07:21:31.234 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.agent.pipeline.controller.ChatController#chat(String)
2025-07-05 07:21:31.605 [http-nio-8080-exec-2] DEBUG org.springframework.web.client.DefaultRestClient - Writing [ChatCompletionRequest[messages=[ChatCompletionMessage[rawContent=你好, role=USER, name=null, toolCallId=null, toolCalls=null, refusal=null, audioOutput=null, annotations=null]], model=deepseek-reasoner, store=null, metadata=null, frequencyPenalty=null, logitBias=null, logprobs=null, topLogprobs=null, maxTokens=2048, maxCompletionTokens=null, n=null, outputModalities=null, audioParameters=null, presencePenalty=null, responseFormat=null, seed=null, serviceTier=null, stop=null, stream=false, streamOptions=null, temperature=0.7, topP=null, tools=null, toolChoice=null, parallelToolCalls=null, user=null, reasoningEffort=null, webSearchOptions=null]] as "application/json" with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-07-05 07:21:44.057 [http-nio-8080-exec-2] DEBUG org.springframework.web.client.DefaultRestClient - Reading to [org.springframework.ai.openai.api.OpenAiApi$ChatCompletion]
2025-07-05 07:21:44.070 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-07-05 07:21:44.072 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing ["你好呀！😊 很高兴见到你～ 有什么我可以帮你的吗？无论是解答问题、提供建议，还是陪你聊聊，我都在这里！尽管告诉我吧～"]
2025-07-05 07:21:44.074 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-05 07:23:37.132 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-07-05 07:23:37.135 [Thread-11] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:23:37.136 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:23:37.138 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:23:37.139 [Thread-11] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:23:37.148 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-07-05 07:23:37.150 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-07-05 07:23:37.150 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-05 07:23:37.150 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-05 07:23:37.233 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:23:37.233 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:23:37.233 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:23:37.489 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:23:37.489 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:23:37.489 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:23:37.489 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:23:37.503 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:23:37.503 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 267 ms
2025-07-05 07:23:37.536 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-07-05 07:23:37.537 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn15: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:23:37.538 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-07-05 07:23:37.625 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:23:37.630 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:23:37.632 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:23:37.634 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:23:37.637 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:23:37.639 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:23:37.639 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:23:37.639 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:23:37.639 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:23:37.664 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-07-05 07:23:37.665 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn17: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:23:37.665 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-07-05 07:23:37.665 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:23:37.671 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:23:37.673 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:23:37.676 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:23:37.679 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.477 seconds (process running for 144.658)
2025-07-05 07:23:37.680 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:23:39.098 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-07-05 07:23:39.099 [Thread-13] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:23:39.099 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:23:39.102 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:23:39.102 [Thread-13] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:23:39.104 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-07-05 07:23:39.104 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-07-05 07:23:39.105 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-07-05 07:23:39.105 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-07-05 07:23:39.181 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:23:39.181 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:23:39.181 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:23:39.408 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:23:39.408 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:23:39.409 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:23:39.409 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:23:39.422 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:23:39.422 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 239 ms
2025-07-05 07:23:39.443 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-07-05 07:23:39.444 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn30: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:23:39.444 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-07-05 07:23:39.517 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:23:39.521 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:23:39.523 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:23:39.524 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:23:39.528 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:23:39.530 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:23:39.531 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:23:39.531 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:23:39.531 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:23:39.560 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-07-05 07:23:39.561 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn32: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:23:39.561 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-07-05 07:23:39.562 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:23:39.567 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:23:39.569 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:23:39.572 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:23:39.576 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.419 seconds (process running for 146.555)
2025-07-05 07:23:39.576 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:24:21.902 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-07-05 07:24:21.903 [Thread-23] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:24:21.904 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:24:21.906 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:24:21.906 [Thread-23] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:24:21.907 [Thread-23] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-07-05 07:24:21.908 [Thread-23] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-07-05 07:24:21.908 [Thread-23] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-07-05 07:24:21.909 [Thread-23] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-07-05 07:24:21.971 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:24:21.971 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:24:21.971 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:24:22.187 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:24:22.188 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:24:22.188 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:24:22.188 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:24:22.197 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:24:22.197 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 225 ms
2025-07-05 07:24:22.214 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-07-05 07:24:22.215 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn45: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:24:22.215 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-07-05 07:24:22.276 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:24:22.278 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:24:22.279 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:24:22.281 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:24:22.284 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:24:22.285 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:24:22.285 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:24:22.285 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:24:22.285 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:24:22.302 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-07-05 07:24:22.303 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn46: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:24:22.303 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-07-05 07:24:22.303 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:24:22.307 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:24:22.308 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:24:22.312 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:24:22.313 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.364 seconds (process running for 189.293)
2025-07-05 07:24:22.314 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:24:23.739 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-07-05 07:24:23.740 [Thread-33] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:24:23.741 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:24:23.743 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:24:23.743 [Thread-33] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:24:23.744 [Thread-33] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-07-05 07:24:23.744 [Thread-33] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-07-05 07:24:23.744 [Thread-33] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-07-05 07:24:23.745 [Thread-33] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-07-05 07:24:23.808 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:24:23.808 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:24:23.808 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:24:24.000 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:24:24.001 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:24:24.001 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:24:24.001 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:24:24.009 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:24:24.009 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 199 ms
2025-07-05 07:24:24.025 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-07-05 07:24:24.026 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn60: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:24:24.027 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-07-05 07:24:24.080 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:24:24.083 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:24:24.084 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:24:24.085 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:24:24.088 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:24:24.089 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:24:24.090 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:24:24.090 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:24:24.090 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:24:24.105 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-07-05 07:24:24.105 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn61: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:24:24.105 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-07-05 07:24:24.105 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:24:24.109 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:24:24.111 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:24:24.112 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:24:24.114 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.33 seconds (process running for 191.093)
2025-07-05 07:24:24.116 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:25:24.223 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (1 addition, 0 deletions, 1 modification)
2025-07-05 07:25:24.224 [Thread-43] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:25:24.225 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:25:24.227 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:25:24.227 [Thread-43] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:25:24.228 [Thread-43] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-07-05 07:25:24.228 [Thread-43] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-07-05 07:25:24.228 [Thread-43] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-07-05 07:25:24.229 [Thread-43] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-07-05 07:25:24.288 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:25:24.288 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:25:24.289 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:25:24.513 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:25:24.513 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:25:24.513 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:25:24.514 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:25:24.523 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:25:24.523 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 233 ms
2025-07-05 07:25:24.539 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Starting...
2025-07-05 07:25:24.540 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-11 - Added connection conn75: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:25:24.541 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Start completed.
2025-07-05 07:25:24.576 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'agentPipelineService': Lookup method resolution failed
2025-07-05 07:25:24.576 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown initiated...
2025-07-05 07:25:24.576 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown completed.
2025-07-05 07:25:24.576 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-05 07:25:24.579 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 07:25:24.594 [restartedMain] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'agentPipelineService': Lookup method resolution failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:498)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:368)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1334)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.example.agent.app.AgentApplication.main(AgentApplication.java:25)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.IllegalStateException: Failed to introspect Class [com.example.agent.pipeline.service.AgentPipelineService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@3a5e9406]
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:483)
	at org.springframework.util.ReflectionUtils.doWithLocalMethods(ReflectionUtils.java:320)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:476)
	... 24 common frames omitted
Caused by: java.lang.NoClassDefFoundError: AgentProcessingResult
	at java.base/java.lang.Class.getDeclaredMethods0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3578)
	at java.base/java.lang.Class.getDeclaredMethods(Class.java:2676)
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:465)
	... 26 common frames omitted
Caused by: java.lang.ClassNotFoundException: AgentProcessingResult
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 30 common frames omitted
2025-07-05 07:25:46.958 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:25:46.959 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:25:46.959 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:25:47.174 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:25:47.175 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:25:47.175 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:25:47.175 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:25:47.185 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:25:47.185 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 225 ms
2025-07-05 07:25:47.203 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Starting...
2025-07-05 07:25:47.204 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-12 - Added connection conn76: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:25:47.204 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Start completed.
2025-07-05 07:25:47.241 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'agentPipelineService': Lookup method resolution failed
2025-07-05 07:25:47.241 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown initiated...
2025-07-05 07:25:47.241 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown completed.
2025-07-05 07:25:47.242 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-05 07:25:47.244 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 07:25:47.246 [restartedMain] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'agentPipelineService': Lookup method resolution failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:498)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:368)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1334)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.example.agent.app.AgentApplication.main(AgentApplication.java:25)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.IllegalStateException: Failed to introspect Class [com.example.agent.pipeline.service.AgentPipelineService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@63750b0f]
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:483)
	at org.springframework.util.ReflectionUtils.doWithLocalMethods(ReflectionUtils.java:320)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:476)
	... 24 common frames omitted
Caused by: java.lang.NoClassDefFoundError: AgentProcessingResult
	at java.base/java.lang.Class.getDeclaredMethods0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3578)
	at java.base/java.lang.Class.getDeclaredMethods(Class.java:2676)
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:465)
	... 26 common frames omitted
Caused by: java.lang.ClassNotFoundException: AgentProcessingResult
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 30 common frames omitted
2025-07-05 07:25:49.764 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:25:49.765 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:25:49.765 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:25:49.976 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:25:49.977 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:25:49.977 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:25:49.977 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:25:49.986 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:25:49.987 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 221 ms
2025-07-05 07:25:50.005 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Starting...
2025-07-05 07:25:50.006 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-13 - Added connection conn77: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:25:50.006 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Start completed.
2025-07-05 07:25:50.075 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:25:50.077 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:25:50.079 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:25:50.080 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:25:50.084 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:25:50.085 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:25:50.085 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:25:50.085 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:25:50.085 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:25:50.103 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Starting...
2025-07-05 07:25:50.104 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-14 - Added connection conn78: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:25:50.104 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Start completed.
2025-07-05 07:25:50.104 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:25:50.108 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:25:50.110 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:25:50.111 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:25:50.113 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.382 seconds (process running for 277.093)
2025-07-05 07:25:50.114 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:26:02.789 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-07-05 07:26:02.790 [Thread-53] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:26:02.790 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:02.792 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:26:02.792 [Thread-53] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:02.793 [Thread-53] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown initiated...
2025-07-05 07:26:02.794 [Thread-53] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown completed.
2025-07-05 07:26:02.794 [Thread-53] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown initiated...
2025-07-05 07:26:02.794 [Thread-53] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown completed.
2025-07-05 07:26:02.860 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:26:02.861 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:26:02.861 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:26:03.050 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:26:03.050 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:03.050 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:26:03.051 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:26:03.060 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:26:03.060 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 198 ms
2025-07-05 07:26:03.075 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Starting...
2025-07-05 07:26:03.076 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-15 - Added connection conn92: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:26:03.076 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Start completed.
2025-07-05 07:26:03.118 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:26:03.118 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:26:03.118 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:26:03.118 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:26:03.138 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:26:03.142 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:26:03.143 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:26:03.144 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:26:03.146 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:26:03.147 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:26:03.147 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:26:03.147 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:26:03.147 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:26:03.163 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Starting...
2025-07-05 07:26:03.164 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-16 - Added connection conn93: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:26:03.164 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Start completed.
2025-07-05 07:26:03.164 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:26:03.167 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:26:03.169 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:03.173 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:26:03.174 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.337 seconds (process running for 290.154)
2025-07-05 07:26:03.175 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:26:16.834 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-07-05 07:26:16.834 [Thread-81] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:26:16.835 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:16.838 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:26:16.838 [Thread-81] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:16.839 [Thread-81] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Shutdown initiated...
2025-07-05 07:26:16.839 [Thread-81] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Shutdown completed.
2025-07-05 07:26:16.839 [Thread-81] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Shutdown initiated...
2025-07-05 07:26:16.840 [Thread-81] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Shutdown completed.
2025-07-05 07:26:16.898 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:26:16.898 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:26:16.898 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:26:17.077 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:26:17.077 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:17.078 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:26:17.078 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:26:17.088 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:26:17.088 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 188 ms
2025-07-05 07:26:17.103 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Starting...
2025-07-05 07:26:17.104 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-17 - Added connection conn107: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:26:17.104 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Start completed.
2025-07-05 07:26:17.138 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:26:17.138 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:26:17.138 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:26:17.138 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:26:17.155 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:26:17.158 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:26:17.159 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:26:17.161 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:26:17.163 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:26:17.164 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:26:17.164 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:26:17.164 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:26:17.164 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:26:17.181 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Starting...
2025-07-05 07:26:17.182 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-18 - Added connection conn108: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:26:17.182 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Start completed.
2025-07-05 07:26:17.182 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:26:17.185 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:26:17.187 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:17.189 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:26:17.190 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.311 seconds (process running for 304.17)
2025-07-05 07:26:17.191 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:26:25.758 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-07-05 07:26:25.759 [Thread-91] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:26:25.759 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:25.761 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:26:25.761 [Thread-91] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:25.762 [Thread-91] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Shutdown initiated...
2025-07-05 07:26:25.762 [Thread-91] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Shutdown completed.
2025-07-05 07:26:25.763 [Thread-91] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Shutdown initiated...
2025-07-05 07:26:25.763 [Thread-91] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Shutdown completed.
2025-07-05 07:26:25.820 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:26:25.820 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:26:25.821 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:26:25.990 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:26:25.990 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:25.990 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:26:25.991 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:26:25.999 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:26:25.999 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 177 ms
2025-07-05 07:26:26.014 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Starting...
2025-07-05 07:26:26.015 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-19 - Added connection conn122: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:26:26.015 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Start completed.
2025-07-05 07:26:26.052 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:26:26.052 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:26:26.052 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:26:26.052 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:26:26.069 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:26:26.072 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:26:26.074 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:26:26.075 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:26:26.077 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:26:26.077 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:26:26.078 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:26:26.078 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:26:26.078 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:26:26.093 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Starting...
2025-07-05 07:26:26.094 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-20 - Added connection conn123: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:26:26.094 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Start completed.
2025-07-05 07:26:26.094 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:26:26.098 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:26:26.099 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:26.101 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:26:26.103 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.3 seconds (process running for 313.083)
2025-07-05 07:26:26.103 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:26:36.735 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 1 deletion, 1 modification)
2025-07-05 07:26:36.735 [Thread-101] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:26:36.736 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:36.739 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:26:36.739 [Thread-101] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:36.740 [Thread-101] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Shutdown initiated...
2025-07-05 07:26:36.740 [Thread-101] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Shutdown completed.
2025-07-05 07:26:36.741 [Thread-101] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Shutdown initiated...
2025-07-05 07:26:36.741 [Thread-101] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Shutdown completed.
2025-07-05 07:26:36.798 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:26:36.798 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:26:36.798 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:26:36.970 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:26:36.971 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:36.971 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:26:36.971 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:26:36.981 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:26:36.981 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 182 ms
2025-07-05 07:26:36.995 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Starting...
2025-07-05 07:26:36.996 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-21 - Added connection conn137: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:26:36.996 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Start completed.
2025-07-05 07:26:37.032 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:26:37.032 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:26:37.032 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:26:37.032 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:26:37.049 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:26:37.052 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:26:37.053 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:26:37.054 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:26:37.056 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:26:37.057 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:26:37.057 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:26:37.057 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:26:37.057 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:26:37.073 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Starting...
2025-07-05 07:26:37.073 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-22 - Added connection conn138: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:26:37.073 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Start completed.
2025-07-05 07:26:37.073 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:26:37.077 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:26:37.078 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:37.080 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:26:37.082 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.301 seconds (process running for 324.062)
2025-07-05 07:26:37.082 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:26:47.698 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 8 class path changes (0 additions, 8 deletions, 0 modifications)
2025-07-05 07:26:47.699 [Thread-111] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:26:47.700 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:47.703 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:26:47.703 [Thread-111] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:47.705 [Thread-111] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Shutdown initiated...
2025-07-05 07:26:47.705 [Thread-111] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Shutdown completed.
2025-07-05 07:26:47.705 [Thread-111] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Shutdown initiated...
2025-07-05 07:26:47.706 [Thread-111] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Shutdown completed.
2025-07-05 07:26:47.769 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:26:47.769 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:26:47.769 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:26:47.972 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:26:47.973 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:47.973 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:26:47.973 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:26:47.987 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:26:47.987 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 216 ms
2025-07-05 07:26:48.020 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'agentPipelineService': Unsatisfied dependency expressed through field 'knowledgeRecallStep': Error creating bean with name 'knowledgeRecallStep' defined in file [C:\my\work\rag\agent-pipeline\target\classes\com\example\agent\pipeline\step\KnowledgeRecallStep.class]: Post-processing of merged bean definition failed
2025-07-05 07:26:48.020 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-05 07:26:48.023 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 07:26:48.026 [restartedMain] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'agentPipelineService': Unsatisfied dependency expressed through field 'knowledgeRecallStep': Error creating bean with name 'knowledgeRecallStep' defined in file [C:\my\work\rag\agent-pipeline\target\classes\com\example\agent\pipeline\step\KnowledgeRecallStep.class]: Post-processing of merged bean definition failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.example.agent.app.AgentApplication.main(AgentApplication.java:25)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'knowledgeRecallStep' defined in file [C:\my\work\rag\agent-pipeline\target\classes\com\example\agent\pipeline\step\KnowledgeRecallStep.class]: Post-processing of merged bean definition failed
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:584)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1683)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 25 common frames omitted
Caused by: java.lang.IllegalStateException: Failed to introspect Class [com.example.agent.pipeline.step.KnowledgeRecallStep] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@5177f473]
	at org.springframework.util.ReflectionUtils.getDeclaredFields(ReflectionUtils.java:756)
	at org.springframework.util.ReflectionUtils.doWithLocalFields(ReflectionUtils.java:689)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.buildResourceMetadata(CommonAnnotationBeanPostProcessor.java:432)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.findResourceMetadata(CommonAnnotationBeanPostProcessor.java:413)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(CommonAnnotationBeanPostProcessor.java:313)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:1123)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:581)
	... 33 common frames omitted
Caused by: java.lang.NoClassDefFoundError: com/example/agent/knowledge/factory/KnowledgeSourceFactory
	at java.base/java.lang.Class.getDeclaredFields0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredFields(Class.java:3473)
	at java.base/java.lang.Class.getDeclaredFields(Class.java:2542)
	at org.springframework.util.ReflectionUtils.getDeclaredFields(ReflectionUtils.java:751)
	... 39 common frames omitted
Caused by: java.lang.ClassNotFoundException: com.example.agent.knowledge.factory.KnowledgeSourceFactory
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 43 common frames omitted
2025-07-05 07:26:50.727 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 6504 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:26:50.727 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:26:50.727 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:26:50.897 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:26:50.897 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:50.897 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:26:50.897 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:26:50.905 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:26:50.905 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 176 ms
2025-07-05 07:26:50.919 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Starting...
2025-07-05 07:26:50.920 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-23 - Added connection conn152: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:26:50.920 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Start completed.
2025-07-05 07:26:50.953 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:26:50.953 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:26:50.953 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:26:50.953 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:26:50.970 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:26:50.972 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:26:50.973 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:26:50.974 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:26:50.976 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:26:50.977 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:26:50.977 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:26:50.977 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:26:50.977 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:26:50.992 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Starting...
2025-07-05 07:26:50.992 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-24 - Added connection conn153: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:26:50.992 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Start completed.
2025-07-05 07:26:50.993 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:26:50.996 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:26:50.997 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:26:50.999 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:26:51.000 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.289 seconds (process running for 337.98)
2025-07-05 07:26:51.001 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:32:32.723 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:32:32.726 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:32:32.727 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Shutdown initiated...
2025-07-05 07:32:32.727 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Shutdown completed.
2025-07-05 07:32:32.727 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Shutdown initiated...
2025-07-05 07:32:32.728 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Shutdown completed.
2025-07-05 07:34:02.084 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-07-05 07:34:02.119 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:34:02.119 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:34:02.120 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:34:02.161 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-07-05 07:34:02.161 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-07-05 07:34:03.401 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:34:03.420 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:34:03.423 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:34:03.423 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:34:03.464 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:34:03.464 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1303 ms
2025-07-05 07:34:03.596 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-05 07:34:03.737 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:34:03.739 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-05 07:34:04.266 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:34:04.266 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:34:04.266 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:34:04.266 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:34:04.404 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:34:04.446 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:34:04.462 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:34:04.476 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:34:04.513 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:34:04.524 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:34:04.525 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:34:04.526 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:34:04.526 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:34:04.616 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-07-05 07:34:04.619 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn5: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:34:04.619 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-07-05 07:34:04.620 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:34:04.656 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:34:04.665 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:34:04.673 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:34:04.680 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 3.062 seconds (process running for 3.392)
2025-07-05 07:35:12.784 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-05 07:35:12.784 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-05 07:35:12.784 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-05 07:35:12.784 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-05 07:35:12.784 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-05 07:35:12.784 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@34f0a8c9
2025-07-05 07:35:12.784 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@671b39a
2025-07-05 07:35:12.784 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-05 07:35:12.785 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-07-05 07:35:12.790 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/ai/chat?message=%E4%BD%A0%E5%A5%BD", parameters={masked}
2025-07-05 07:35:12.799 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.agent.pipeline.controller.ChatController#chat(String)
2025-07-05 07:35:12.941 [http-nio-8080-exec-1] DEBUG org.springframework.web.client.DefaultRestClient - Writing [ChatCompletionRequest[messages=[ChatCompletionMessage[rawContent=你好, role=USER, name=null, toolCallId=null, toolCalls=null, refusal=null, audioOutput=null, annotations=null]], model=deepseek-reasoner, store=null, metadata=null, frequencyPenalty=null, logitBias=null, logprobs=null, topLogprobs=null, maxTokens=2048, maxCompletionTokens=null, n=null, outputModalities=null, audioParameters=null, presencePenalty=null, responseFormat=null, seed=null, serviceTier=null, stop=null, stream=false, streamOptions=null, temperature=0.7, topP=null, tools=null, toolChoice=null, parallelToolCalls=null, user=null, reasoningEffort=null, webSearchOptions=null]] as "application/json" with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-07-05 07:35:24.683 [http-nio-8080-exec-1] DEBUG org.springframework.web.client.DefaultRestClient - Reading to [org.springframework.ai.openai.api.OpenAiApi$ChatCompletion]
2025-07-05 07:35:24.710 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-07-05 07:35:24.712 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing ["你好呀！👋 很高兴见到你～有什么我可以帮你的吗？无论是问题解答、日常闲聊，还是需要建议，我都在这儿随时为你效劳！😊"]
2025-07-05 07:35:24.719 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-05 07:40:26.797 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-07-05 07:40:26.802 [Thread-11] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:40:26.814 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:40:26.843 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:40:26.844 [Thread-11] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:40:26.865 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-07-05 07:40:26.869 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-07-05 07:40:26.869 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-05 07:40:26.871 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-05 07:40:27.132 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:40:27.132 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:40:27.133 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:40:28.096 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:40:28.098 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:40:28.099 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:40:28.099 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:40:28.144 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:40:28.145 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1005 ms
2025-07-05 07:40:28.199 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-07-05 07:40:28.201 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn15: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:40:28.201 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-07-05 07:40:28.326 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:40:28.326 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:40:28.326 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:40:28.326 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:40:28.375 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:40:28.387 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:40:28.390 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:40:28.394 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:40:28.400 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:40:28.402 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:40:28.403 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:40:28.403 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:40:28.404 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:40:28.444 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-07-05 07:40:28.445 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn20: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:40:28.446 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-07-05 07:40:28.446 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:40:28.456 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:40:28.462 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:40:28.467 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:40:28.475 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 1.504 seconds (process running for 387.187)
2025-07-05 07:40:28.481 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:40:58.813 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-07-05 07:40:58.814 [Thread-13] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:40:58.815 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:40:58.824 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:40:58.825 [Thread-13] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:40:58.829 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-07-05 07:40:58.831 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-07-05 07:40:58.833 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-07-05 07:40:58.834 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-07-05 07:40:58.976 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:40:58.976 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:40:58.976 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:40:59.539 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:40:59.540 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:40:59.540 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:40:59.540 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:40:59.583 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:40:59.584 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 603 ms
2025-07-05 07:40:59.643 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-07-05 07:40:59.646 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn30: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:40:59.646 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-07-05 07:40:59.785 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:40:59.785 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:40:59.786 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:40:59.786 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:40:59.789 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'streamingService' defined in file [C:\my\work\rag\agent-pipeline\target\classes\com\example\agent\pipeline\streaming\StreamingService.class]: Failed to instantiate [com.example.agent.pipeline.streaming.StreamingService]: Constructor threw exception
2025-07-05 07:40:59.790 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-07-05 07:40:59.811 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-07-05 07:40:59.812 [restartedMain] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-05 07:40:59.818 [restartedMain] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-05 07:40:59.842 [restartedMain] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'streamingService' defined in file [C:\my\work\rag\agent-pipeline\target\classes\com\example\agent\pipeline\streaming\StreamingService.class]: Failed to instantiate [com.example.agent.pipeline.streaming.StreamingService]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:321)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:309)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.example.agent.app.AgentApplication.main(AgentApplication.java:25)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.example.agent.pipeline.streaming.StreamingService]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:145)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:318)
	... 24 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problems: 
	Local variable sessionId is required to be final or effectively final based on its usage
	Local variable sessionId defined in an enclosing scope must be final or effectively final
	Local variable sessionId defined in an enclosing scope must be final or effectively final
	Local variable sessionId defined in an enclosing scope must be final or effectively final
	Local variable sessionId defined in an enclosing scope must be final or effectively final
	Local variable sessionId defined in an enclosing scope must be final or effectively final
	Local variable sessionId defined in an enclosing scope must be final or effectively final

	at com.example.agent.pipeline.streaming.StreamingService.<init>(StreamingService.java:43)
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:210)
	... 26 common frames omitted
2025-07-05 07:41:15.922 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:41:15.922 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:41:15.923 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:41:16.502 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:41:16.503 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:41:16.503 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:41:16.503 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:41:16.524 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:41:16.524 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 598 ms
2025-07-05 07:41:16.566 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-07-05 07:41:16.568 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn32: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:41:16.569 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-07-05 07:41:16.660 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:41:16.661 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:41:16.661 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:41:16.661 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:41:16.710 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:41:16.722 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:41:16.725 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:41:16.730 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:41:16.735 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:41:16.737 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:41:16.737 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:41:16.737 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:41:16.738 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:41:16.774 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-07-05 07:41:16.776 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn36: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:41:16.776 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-07-05 07:41:16.777 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:41:16.786 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:41:16.790 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:41:16.793 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:41:16.796 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.953 seconds (process running for 435.509)
2025-07-05 07:41:16.799 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:41:30.643 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-07-05 07:41:30.647 [Thread-23] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:41:30.649 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:41:30.675 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:41:30.676 [Thread-23] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:41:30.678 [Thread-23] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-07-05 07:41:30.678 [Thread-23] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-07-05 07:41:30.679 [Thread-23] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-07-05 07:41:30.679 [Thread-23] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-07-05 07:41:30.796 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:41:30.796 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:41:30.796 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:41:31.228 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:41:31.229 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:41:31.229 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:41:31.229 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:41:31.256 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:41:31.256 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 457 ms
2025-07-05 07:41:31.288 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-07-05 07:41:31.292 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn47: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:41:31.292 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-07-05 07:41:31.371 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:41:31.372 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:41:31.372 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:41:31.372 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:41:31.411 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:41:31.417 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:41:31.420 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:41:31.422 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:41:31.427 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:41:31.429 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:41:31.429 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:41:31.429 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:41:31.430 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:41:31.486 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-07-05 07:41:31.487 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn50: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:41:31.487 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-07-05 07:41:31.487 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:41:31.496 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:41:31.508 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:41:31.518 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:41:31.521 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.769 seconds (process running for 450.234)
2025-07-05 07:41:31.522 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:41:45.434 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-07-05 07:41:45.437 [Thread-42] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:41:45.438 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:41:45.441 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:41:45.441 [Thread-42] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:41:45.444 [Thread-42] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-07-05 07:41:45.445 [Thread-42] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-07-05 07:41:45.445 [Thread-42] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-07-05 07:41:45.449 [Thread-42] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-07-05 07:41:45.563 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:41:45.563 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:41:45.563 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:41:46.120 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:41:46.121 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:41:46.121 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:41:46.121 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:41:46.140 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:41:46.140 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 574 ms
2025-07-05 07:41:46.186 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-07-05 07:41:46.190 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn62: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:41:46.190 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-07-05 07:41:46.304 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:41:46.305 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:41:46.305 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:41:46.305 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:41:46.351 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 3 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:41:46.357 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:41:46.359 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:41:46.361 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:41:46.364 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:41:46.366 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:41:46.366 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:41:46.366 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:41:46.366 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:41:46.403 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Starting...
2025-07-05 07:41:46.404 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-11 - Added connection conn66: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:41:46.404 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Start completed.
2025-07-05 07:41:46.404 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:41:46.411 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:41:46.415 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:41:46.434 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:41:46.437 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.914 seconds (process running for 465.15)
2025-07-05 07:41:46.438 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:42:05.451 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-07-05 07:42:05.452 [Thread-52] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:42:05.452 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:05.456 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:42:05.456 [Thread-52] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:05.459 [Thread-52] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown initiated...
2025-07-05 07:42:05.465 [Thread-52] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown completed.
2025-07-05 07:42:05.466 [Thread-52] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-07-05 07:42:05.467 [Thread-52] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-07-05 07:42:05.581 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:42:05.581 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:42:05.582 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:42:05.969 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:42:05.970 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:05.971 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:42:05.971 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:42:05.997 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:42:05.997 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 413 ms
2025-07-05 07:42:06.039 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Starting...
2025-07-05 07:42:06.041 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-12 - Added connection conn77: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:42:06.041 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Start completed.
2025-07-05 07:42:06.119 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:42:06.120 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:42:06.120 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:42:06.120 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:42:06.170 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 5 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:42:06.175 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:42:06.178 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:42:06.181 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:42:06.184 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:42:06.185 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:42:06.185 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:42:06.185 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:42:06.185 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:42:06.212 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Starting...
2025-07-05 07:42:06.213 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-13 - Added connection conn80: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:42:06.213 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Start completed.
2025-07-05 07:42:06.213 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:42:06.220 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:42:06.225 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:06.229 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:42:06.232 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.687 seconds (process running for 484.945)
2025-07-05 07:42:06.233 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:42:07.687 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-07-05 07:42:07.690 [Thread-62] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:42:07.693 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:07.708 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:42:07.708 [Thread-62] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:07.715 [Thread-62] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown initiated...
2025-07-05 07:42:07.716 [Thread-62] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown completed.
2025-07-05 07:42:07.716 [Thread-62] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown initiated...
2025-07-05 07:42:07.717 [Thread-62] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown completed.
2025-07-05 07:42:07.839 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:42:07.840 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:42:07.840 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:42:08.299 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:42:08.300 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:08.300 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:42:08.301 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:42:08.338 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:42:08.338 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 496 ms
2025-07-05 07:42:08.379 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Starting...
2025-07-05 07:42:08.380 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-14 - Added connection conn92: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:42:08.380 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Start completed.
2025-07-05 07:42:08.469 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:42:08.469 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:42:08.469 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:42:08.469 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:42:08.514 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 5 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:42:08.518 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:42:08.520 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:42:08.522 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:42:08.525 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:42:08.526 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:42:08.527 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:42:08.527 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:42:08.527 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:42:08.560 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Starting...
2025-07-05 07:42:08.560 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-15 - Added connection conn95: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:42:08.561 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Start completed.
2025-07-05 07:42:08.561 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:42:08.566 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:42:08.569 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:08.574 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:42:08.577 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.775 seconds (process running for 487.29)
2025-07-05 07:42:08.578 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:42:23.520 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-07-05 07:42:23.524 [Thread-72] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:42:23.526 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:23.534 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:42:23.534 [Thread-72] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:23.537 [Thread-72] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Shutdown initiated...
2025-07-05 07:42:23.542 [Thread-72] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-15 - Shutdown completed.
2025-07-05 07:42:23.544 [Thread-72] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown initiated...
2025-07-05 07:42:23.548 [Thread-72] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown completed.
2025-07-05 07:42:23.665 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:42:23.665 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:42:23.666 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:42:24.091 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:42:24.092 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:24.093 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:42:24.093 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:42:24.115 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:42:24.115 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 447 ms
2025-07-05 07:42:24.155 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Starting...
2025-07-05 07:42:24.156 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-16 - Added connection conn107: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:42:24.157 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Start completed.
2025-07-05 07:42:24.220 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:42:24.220 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:42:24.220 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:42:24.220 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:42:24.251 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 5 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:42:24.254 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:42:24.257 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:42:24.259 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:42:24.262 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:42:24.264 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:42:24.264 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:42:24.264 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:42:24.264 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:42:24.294 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Starting...
2025-07-05 07:42:24.295 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-17 - Added connection conn109: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:42:24.295 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Start completed.
2025-07-05 07:42:24.295 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:42:24.312 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:42:24.315 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:24.318 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:42:24.321 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.69 seconds (process running for 503.034)
2025-07-05 07:42:24.321 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:42:46.875 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-07-05 07:42:46.877 [Thread-82] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:42:46.879 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:46.883 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:42:46.883 [Thread-82] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:46.886 [Thread-82] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Shutdown initiated...
2025-07-05 07:42:46.890 [Thread-82] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-17 - Shutdown completed.
2025-07-05 07:42:46.891 [Thread-82] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Shutdown initiated...
2025-07-05 07:42:46.892 [Thread-82] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-16 - Shutdown completed.
2025-07-05 07:42:47.005 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:42:47.006 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:42:47.006 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:42:47.401 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:42:47.402 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:47.402 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:42:47.402 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:42:47.434 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:42:47.434 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 426 ms
2025-07-05 07:42:47.472 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Starting...
2025-07-05 07:42:47.473 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-18 - Added connection conn122: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:42:47.473 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Start completed.
2025-07-05 07:42:47.542 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:42:47.542 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:42:47.542 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:42:47.542 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:42:47.579 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 5 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:42:47.584 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:42:47.586 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:42:47.589 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:42:47.593 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:42:47.596 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:42:47.596 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:42:47.596 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:42:47.596 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:42:47.624 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Starting...
2025-07-05 07:42:47.625 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-19 - Added connection conn125: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:42:47.625 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Start completed.
2025-07-05 07:42:47.625 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:42:47.631 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:42:47.634 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:42:47.637 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:42:47.641 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.67 seconds (process running for 526.354)
2025-07-05 07:42:47.642 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:43:09.949 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-07-05 07:43:09.950 [Thread-92] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:43:09.951 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:43:09.966 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:43:09.969 [Thread-92] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:43:09.973 [Thread-92] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Shutdown initiated...
2025-07-05 07:43:09.974 [Thread-92] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-19 - Shutdown completed.
2025-07-05 07:43:09.974 [Thread-92] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Shutdown initiated...
2025-07-05 07:43:09.975 [Thread-92] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-18 - Shutdown completed.
2025-07-05 07:43:10.075 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:43:10.075 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:43:10.075 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:43:10.461 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:43:10.462 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:43:10.462 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:43:10.462 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:43:10.483 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:43:10.483 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 405 ms
2025-07-05 07:43:10.512 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Starting...
2025-07-05 07:43:10.514 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-20 - Added connection conn137: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:43:10.514 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Start completed.
2025-07-05 07:43:10.614 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:43:10.614 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:43:10.614 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:43:10.614 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:43:10.663 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 5 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:43:10.678 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:43:10.684 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:43:10.686 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:43:10.691 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:43:10.695 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:43:10.695 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:43:10.695 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:43:10.695 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:43:10.721 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Starting...
2025-07-05 07:43:10.723 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-21 - Added connection conn141: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:43:10.723 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Start completed.
2025-07-05 07:43:10.723 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:43:10.730 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:43:10.733 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:43:10.736 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:43:10.737 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.699 seconds (process running for 549.451)
2025-07-05 07:43:10.738 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:43:23.670 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-07-05 07:43:23.673 [Thread-102] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:43:23.676 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:43:23.688 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:43:23.689 [Thread-102] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:43:23.690 [Thread-102] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Shutdown initiated...
2025-07-05 07:43:23.691 [Thread-102] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-21 - Shutdown completed.
2025-07-05 07:43:23.692 [Thread-102] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Shutdown initiated...
2025-07-05 07:43:23.694 [Thread-102] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-20 - Shutdown completed.
2025-07-05 07:43:23.805 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:43:23.805 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:43:23.805 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:43:24.177 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:43:24.178 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:43:24.178 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:43:24.178 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:43:24.196 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:43:24.196 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 387 ms
2025-07-05 07:43:24.227 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Starting...
2025-07-05 07:43:24.229 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-22 - Added connection conn152: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:43:24.229 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Start completed.
2025-07-05 07:43:24.311 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:43:24.312 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:43:24.312 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:43:24.312 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:43:24.344 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 5 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:43:24.349 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:43:24.351 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:43:24.353 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:43:24.356 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:43:24.359 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:43:24.359 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:43:24.359 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:43:24.359 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:43:24.390 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Starting...
2025-07-05 07:43:24.391 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-23 - Added connection conn155: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:43:24.392 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Start completed.
2025-07-05 07:43:24.392 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:43:24.399 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:43:24.401 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:43:24.405 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:43:24.408 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.644 seconds (process running for 563.121)
2025-07-05 07:43:24.409 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:44:09.596 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 15 class path changes (0 additions, 15 deletions, 0 modifications)
2025-07-05 07:44:09.597 [Thread-112] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:44:09.597 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:44:09.603 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:44:09.603 [Thread-112] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:44:09.604 [Thread-112] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Shutdown initiated...
2025-07-05 07:44:09.606 [Thread-112] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Shutdown completed.
2025-07-05 07:44:09.606 [Thread-112] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Shutdown initiated...
2025-07-05 07:44:09.607 [Thread-112] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-22 - Shutdown completed.
2025-07-05 07:44:09.718 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:44:09.718 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:44:09.719 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:44:10.104 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:44:10.104 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:44:10.105 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:44:10.105 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:44:10.128 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:44:10.128 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 406 ms
2025-07-05 07:44:10.160 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Starting...
2025-07-05 07:44:10.161 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-24 - Added connection conn167: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:44:10.161 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Start completed.
2025-07-05 07:44:10.229 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 2 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:44:10.237 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:44:10.239 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:44:10.241 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:44:10.245 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:44:10.246 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:44:10.246 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:44:10.246 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:44:10.247 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:44:10.294 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Starting...
2025-07-05 07:44:10.295 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-25 - Added connection conn169: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:44:10.295 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Start completed.
2025-07-05 07:44:10.295 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:44:10.303 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:44:10.306 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:44:10.308 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:44:10.311 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.634 seconds (process running for 609.024)
2025-07-05 07:44:10.312 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:45:51.127 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 8 class path changes (0 additions, 8 deletions, 0 modifications)
2025-07-05 07:45:51.128 [Thread-122] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:45:51.129 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:45:51.135 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:45:51.135 [Thread-122] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:45:51.136 [Thread-122] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Shutdown initiated...
2025-07-05 07:45:51.137 [Thread-122] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Shutdown completed.
2025-07-05 07:45:51.137 [Thread-122] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Shutdown initiated...
2025-07-05 07:45:51.138 [Thread-122] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Shutdown completed.
2025-07-05 07:45:51.245 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:45:51.247 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:45:51.247 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:45:51.649 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:45:51.650 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:45:51.650 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:45:51.651 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:45:51.674 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:45:51.674 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 420 ms
2025-07-05 07:45:51.726 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 2 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:45:51.737 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:45:51.741 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:45:51.743 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:45:51.747 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:45:51.750 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:45:51.750 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:45:51.751 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:45:51.751 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:45:51.829 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Starting...
2025-07-05 07:45:51.832 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-26 - Added connection conn182: url=jdbc:h2:mem:testdb user=SA
2025-07-05 07:45:51.833 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Start completed.
2025-07-05 07:45:51.833 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-07-05 07:45:51.864 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:45:51.869 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:45:51.874 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:45:51.880 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.674 seconds (process running for 710.592)
2025-07-05 07:45:51.886 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   DataSourceAutoConfiguration.PooledDataSourceConfiguration matched:
      - AnyNestedCondition 1 matched 1 did not; NestedCondition on DataSourceAutoConfiguration.PooledDataSourceCondition.PooledDataSourceAvailable PooledDataSource found supported DataSource; NestedCondition on DataSourceAutoConfiguration.PooledDataSourceCondition.ExplicitType @ConditionalOnProperty (spring.datasource.type) did not find property 'spring.datasource.type' (DataSourceAutoConfiguration.PooledDataSourceCondition)
      - @ConditionalOnMissingBean (types: javax.sql.DataSource,javax.sql.XADataSource; SearchStrategy: all) did not find any beans (OnBeanCondition)

   DataSourceAutoConfiguration.PooledDataSourceConfiguration#jdbcConnectionDetails matched:
      - @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.jdbc.JdbcConnectionDetails; SearchStrategy: all) did not find any beans (OnBeanCondition)

   DataSourceTransactionManagerAutoConfiguration.JdbcTransactionManagerConfiguration#transactionManager matched:
      - @ConditionalOnMissingBean (types: org.springframework.transaction.TransactionManager; SearchStrategy: all) did not find any beans (OnBeanCondition)

   DevToolsDataSourceAutoConfiguration matched:
      - @ConditionalOnClass found required class 'javax.sql.DataSource' (OnClassCondition)
      - Devtools devtools enabled. (OnEnabledDevToolsCondition)
      - DevTools DataSource Condition found auto-configured DataSource (DevToolsDataSourceAutoConfiguration.DevToolsDataSourceCondition)

   JdbcTemplateConfiguration matched:
      - @ConditionalOnMissingBean (types: org.springframework.jdbc.core.JdbcOperations; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

    None


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-07-05 07:45:54.156 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 62 class path changes (23 additions, 0 deletions, 39 modifications)
2025-07-05 07:45:54.157 [Thread-132] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:45:54.158 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:45:54.164 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:45:54.165 [Thread-132] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:45:54.172 [Thread-132] WARN  o.s.beans.factory.support.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-07-05 07:45:54.172 [Thread-132] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Shutdown initiated...
2025-07-05 07:45:54.173 [Thread-132] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-26 - Shutdown completed.
2025-07-05 07:45:54.320 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 20424 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:45:54.321 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:45:54.321 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:45:54.701 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:45:54.702 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:45:54.702 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:45:54.702 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:45:54.726 [restartedMain] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:45:54.726 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 402 ms
2025-07-05 07:45:54.755 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Starting...
2025-07-05 07:45:54.757 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-27 - Added connection conn192: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:45:54.757 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-27 - Start completed.
2025-07-05 07:45:54.826 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:45:54.827 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:45:54.827 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:45:54.827 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:45:54.859 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 5 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:45:54.866 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:45:54.868 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:45:54.870 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:45:54.874 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:45:54.876 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:45:54.876 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:45:54.876 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:45:54.877 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:45:54.903 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Starting...
2025-07-05 07:45:54.904 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-28 - Added connection conn194: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:45:54.904 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-28 - Start completed.
2025-07-05 07:45:54.904 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:45:54.916 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:45:54.921 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:45:54.927 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:45:54.930 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 0.688 seconds (process running for 713.642)
2025-07-05 07:45:54.931 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

    None


Negative matches:
-----------------

   DataSourceAutoConfiguration.PooledDataSourceConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: javax.sql.DataSource,javax.sql.XADataSource; SearchStrategy: all) found beans of type 'javax.sql.DataSource' primaryDataSource, vectorDataSource (OnBeanCondition)
      Matched:
         - AnyNestedCondition 1 matched 1 did not; NestedCondition on DataSourceAutoConfiguration.PooledDataSourceCondition.PooledDataSourceAvailable PooledDataSource found supported DataSource; NestedCondition on DataSourceAutoConfiguration.PooledDataSourceCondition.ExplicitType @ConditionalOnProperty (spring.datasource.type) did not find property 'spring.datasource.type' (DataSourceAutoConfiguration.PooledDataSourceCondition)

   DataSourceTransactionManagerAutoConfiguration.JdbcTransactionManagerConfiguration#transactionManager:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.transaction.TransactionManager; SearchStrategy: all) found beans of type 'org.springframework.transaction.TransactionManager' primaryTransactionManager, vectorTransactionManager (OnBeanCondition)

   DevToolsDataSourceAutoConfiguration:
      Did not match:
         - DevTools DataSource Condition did not find a single DataSource bean (DevToolsDataSourceAutoConfiguration.DevToolsDataSourceCondition)
      Matched:
         - @ConditionalOnClass found required class 'javax.sql.DataSource' (OnClassCondition)
         - Devtools devtools enabled. (OnEnabledDevToolsCondition)

   JdbcTemplateConfiguration:
      Did not match:
         - @ConditionalOnMissingBean (types: org.springframework.jdbc.core.JdbcOperations; SearchStrategy: all) found beans of type 'org.springframework.jdbc.core.JdbcOperations' primaryJdbcTemplate, vectorJdbcTemplate (OnBeanCondition)


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2025-07-05 07:47:14.213 [http-nio-8080-exec-1] INFO  o.a.c.c.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-05 07:47:14.213 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-05 07:47:14.213 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-05 07:47:14.213 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-05 07:47:14.213 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-05 07:47:14.214 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2356b84a
2025-07-05 07:47:14.215 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2d914250
2025-07-05 07:47:14.215 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-05 07:47:14.215 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-05 07:47:14.217 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/sse-test.html", parameters={}
2025-07-05 07:47:14.222 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 07:47:14.230 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-05 07:47:14.333 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/favicon.ico", parameters={}
2025-07-05 07:47:14.334 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 07:47:14.338 [http-nio-8080-exec-2] DEBUG o.s.w.servlet.resource.ResourceHttpRequestHandler - Resource not found
2025-07-05 07:47:14.341 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2025-07-05 07:47:14.341 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-07-05 07:47:14.348 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-07-05 07:47:14.349 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-07-05 07:47:14.358 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json]
2025-07-05 07:47:14.365 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [{timestamp=Sat Jul 05 07:47:14 CST 2025, status=404, error=Not Found, trace=org.springframework.web. (truncated)...]
2025-07-05 07:47:14.421 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-07-05 07:47:21.208 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/ai/stream/connect?sessionId=session_1751672841201", parameters={masked}
2025-07-05 07:47:21.210 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.agent.pipeline.controller.ChatController#streamConnect(String)
2025-07-05 07:47:21.215 [http-nio-8080-exec-3] INFO  c.e.agent.pipeline.streaming.StreamingService - Created new SSE connection for session: session_1751672841201
2025-07-05 07:47:21.228 [http-nio-8080-exec-3] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672841201: STEP_STARTED
2025-07-05 07:47:21.232 [http-nio-8080-exec-3] DEBUG o.s.web.context.request.async.WebAsyncManager - Started async request for "/ai/stream/connect"
2025-07-05 07:47:21.238 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting but response remains open for further handling
2025-07-05 07:47:24.834 [pool-11-thread-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672841201: HEARTBEAT
2025-07-05 07:47:53.700 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/sse-test.html", parameters={}
2025-07-05 07:47:53.702 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 07:47:53.706 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-05 07:47:54.837 [http-nio-8080-exec-5] DEBUG o.s.web.context.request.async.WebAsyncManager - Servlet container error notification for "/ai/stream/connect"
2025-07-05 07:47:54.836 [pool-11-thread-1] ERROR c.e.agent.pipeline.streaming.StreamingService - Failed to send event to session: session_1751672841201
org.springframework.web.context.request.async.AsyncRequestNotUsableException: ServletOutputStream failed to flush: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse.handleIOException(StandardServletAsyncWebRequest.java:346)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.flush(StandardServletAsyncWebRequest.java:418)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:137)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:235)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:310)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.send(ResponseBodyEmitterReturnValueHandler.java:297)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:226)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:217)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at com.example.agent.pipeline.streaming.StreamingService.sendEvent(StreamingService.java:92)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$4(StreamingService.java:164)
	at java.base/java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1603)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$5(StreamingService.java:162)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.catalina.connector.ClientAbortException: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:304)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:266)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:133)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.flush(StandardServletAsyncWebRequest.java:415)
	... 19 common frames omitted
Caused by: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:542)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:125)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1411)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:732)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:698)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:683)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:574)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:156)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:216)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1271)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:408)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:300)
	... 22 common frames omitted
2025-07-05 07:47:54.838 [http-nio-8080-exec-5] ERROR c.e.agent.pipeline.streaming.StreamingService - SSE connection error for session: session_1751672841201
java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:542)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:125)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1411)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:732)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:698)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:683)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:574)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:156)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:216)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1271)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:408)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:300)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:266)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:133)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.flush(StandardServletAsyncWebRequest.java:415)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:137)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:235)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:310)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.send(ResponseBodyEmitterReturnValueHandler.java:297)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:226)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:217)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at com.example.agent.pipeline.streaming.StreamingService.sendEvent(StreamingService.java:92)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$4(StreamingService.java:164)
	at java.base/java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1603)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$5(StreamingService.java:162)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-05 07:47:54.839 [http-nio-8080-exec-5] DEBUG o.s.web.context.request.async.WebAsyncManager - Async result set for "/ai/stream/connect"
2025-07-05 07:47:54.840 [http-nio-8080-exec-5] DEBUG o.s.web.context.request.async.WebAsyncManager - Performing async dispatch for "/ai/stream/connect"
2025-07-05 07:47:54.841 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - "ASYNC" dispatch for GET "/ai/stream/connect?sessionId=session_1751672841201", parameters={masked}
2025-07-05 07:47:54.842 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - Resume with async result [java.io.IOException: 你的主机中的软件中止了一个已建立的连接。]
2025-07-05 07:47:54.850 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Unresolved failure from "ASYNC" dispatch: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
2025-07-05 07:47:54.850 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[localhost].[/].[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] threw exception
java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:542)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:125)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1411)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:732)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:698)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:683)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:574)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:156)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:216)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1271)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:408)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:300)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:266)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:133)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.flush(StandardServletAsyncWebRequest.java:415)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:137)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:235)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:310)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.send(ResponseBodyEmitterReturnValueHandler.java:297)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:226)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:217)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at com.example.agent.pipeline.streaming.StreamingService.sendEvent(StreamingService.java:92)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$4(StreamingService.java:164)
	at java.base/java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1603)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$5(StreamingService.java:162)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-05 07:47:54.851 [http-nio-8080-exec-5] INFO  c.e.agent.pipeline.streaming.StreamingService - SSE connection completed for session: session_1751672841201
2025-07-05 07:47:54.851 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[localhost].[/].[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:542)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:125)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1411)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:732)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:698)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:683)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:574)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:156)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:216)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1271)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:408)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:300)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:266)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:133)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.flush(StandardServletAsyncWebRequest.java:415)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:137)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:235)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:310)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.send(ResponseBodyEmitterReturnValueHandler.java:297)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:226)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:217)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at com.example.agent.pipeline.streaming.StreamingService.sendEvent(StreamingService.java:92)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$4(StreamingService.java:164)
	at java.base/java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1603)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$5(StreamingService.java:162)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-05 07:47:56.578 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/ai/stream/connect?sessionId=session_1751672876573", parameters={masked}
2025-07-05 07:47:56.578 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.agent.pipeline.controller.ChatController#streamConnect(String)
2025-07-05 07:47:56.579 [http-nio-8080-exec-6] INFO  c.e.agent.pipeline.streaming.StreamingService - Created new SSE connection for session: session_1751672876573
2025-07-05 07:47:56.579 [http-nio-8080-exec-6] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: STEP_STARTED
2025-07-05 07:47:56.579 [http-nio-8080-exec-6] DEBUG o.s.web.context.request.async.WebAsyncManager - Started async request for "/ai/stream/connect"
2025-07-05 07:47:56.580 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting but response remains open for further handling
2025-07-05 07:47:58.878 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/ai/stream/chat?message=%E5%91%8A%E8%AF%89%E6%88%91%E4%B8%80%E4%B8%AA%E5%85%B3%E4%BA%8EAI%E7%9A%84%E6%95%85%E4%BA%8B&sessionId=session_1751672876573", parameters={masked}
2025-07-05 07:47:58.879 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.agent.pipeline.controller.ChatController#streamChat(String, String)
2025-07-05 07:47:58.882 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step started: initialization
2025-07-05 07:47:58.883 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-07-05 07:47:58.883 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Nothing to write: null body
2025-07-05 07:47:58.883 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: STEP_STARTED
2025-07-05 07:47:58.883 [http-nio-8080-exec-7] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-05 07:47:58.884 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step completed: initialization
2025-07-05 07:47:58.884 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: STEP_COMPLETED
2025-07-05 07:47:58.885 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step started: PLANNING
2025-07-05 07:47:58.885 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: STEP_STARTED
2025-07-05 07:47:58.885 [ForkJoinPool.commonPool-worker-2] DEBUG com.example.agent.pipeline.step.PlanningStep - 开始执行步骤: PLANNING, 查询ID: query_1751672878882_4d888f99
2025-07-05 07:47:58.887 [ForkJoinPool.commonPool-worker-2] DEBUG com.example.agent.pipeline.step.PlanningStep - 步骤 PLANNING 执行耗时: 2ms
2025-07-05 07:47:58.887 [ForkJoinPool.commonPool-worker-2] INFO  com.example.agent.pipeline.step.PlanningStep - 查询规划完成 - 查询ID: query_1751672878882_4d888f99, 意图: GENERAL, 策略: [VECTOR_STORE]
2025-07-05 07:47:58.887 [ForkJoinPool.commonPool-worker-2] DEBUG com.example.agent.pipeline.step.PlanningStep - 步骤 PLANNING 执行成功
2025-07-05 07:47:58.888 [ForkJoinPool.commonPool-worker-2] DEBUG c.example.agent.pipeline.step.KnowledgeRecallStep - 开始执行步骤: KNOWLEDGE_RECALL, 查询ID: query_1751672878882_4d888f99
2025-07-05 07:47:58.889 [ForkJoinPool.commonPool-worker-2] DEBUG c.example.agent.pipeline.step.KnowledgeRecallStep - 执行知识检索策略: VECTOR_STORE
2025-07-05 07:47:58.890 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.k.repository.impl.VectorStoreRepositoryImpl - Vector store health check: 0 chunks stored
2025-07-05 07:47:58.890 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.knowledge.strategy.VectorStoreStrategyImpl - Performing semantic search for query: '告诉我一个关于AI的故事' with threshold: 0.7 and limit: 10
2025-07-05 07:47:58.894 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.k.repository.impl.VectorStoreRepositoryImpl - Performing semantic search with query: 告诉我一个关于AI的故事, topK: 10, threshold: 0.7
2025-07-05 07:47:58.907 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.knowledge.strategy.VectorStoreStrategyImpl - Vector store search returned 0 results
2025-07-05 07:47:58.907 [ForkJoinPool.commonPool-worker-2] DEBUG c.example.agent.pipeline.step.KnowledgeRecallStep - 策略 VECTOR_STORE 检索到 0 个知识块
2025-07-05 07:47:58.907 [ForkJoinPool.commonPool-worker-2] DEBUG c.example.agent.pipeline.step.KnowledgeRecallStep - 步骤 KNOWLEDGE_RECALL 执行耗时: 19ms
2025-07-05 07:47:58.907 [ForkJoinPool.commonPool-worker-2] INFO  c.example.agent.pipeline.step.KnowledgeRecallStep - 知识召回完成 - 查询ID: query_1751672878882_4d888f99, 检索到 0 个知识块
2025-07-05 07:47:58.907 [ForkJoinPool.commonPool-worker-2] DEBUG c.example.agent.pipeline.step.KnowledgeRecallStep - 步骤 KNOWLEDGE_RECALL 执行成功
2025-07-05 07:47:58.908 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.step.PromptConstructionStep - 开始执行步骤: PROMPT_CONSTRUCTION, 查询ID: query_1751672878882_4d888f99
2025-07-05 07:47:58.908 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.step.PromptConstructionStep - 步骤 PROMPT_CONSTRUCTION 执行耗时: 0ms
2025-07-05 07:47:58.908 [ForkJoinPool.commonPool-worker-2] INFO  c.e.agent.pipeline.step.PromptConstructionStep - Prompt构建完成 - 查询ID: query_1751672878882_4d888f99, 提示长度: 163, 知识块数: 0
2025-07-05 07:47:58.908 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.step.PromptConstructionStep - 步骤 PROMPT_CONSTRUCTION 执行成功
2025-07-05 07:47:58.908 [ForkJoinPool.commonPool-worker-2] DEBUG c.example.agent.pipeline.step.ModelInvocationStep - 开始执行步骤: MODEL_INVOCATION, 查询ID: query_1751672878882_4d888f99
2025-07-05 07:47:58.951 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [36c6b755] HTTP POST http://localhost:8080/api/v1/chat/completions
2025-07-05 07:47:58.956 [ForkJoinPool.commonPool-worker-2] DEBUG org.springframework.web.HttpLogging - [36c6b755] Encoding [{max_tokens=2000, stream=false, temperature=0.7, messages=[{role=system, content=你是一个专业的知识助手。请基于以下知识 (truncated)...]
2025-07-05 07:47:58.977 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/chat/completions", parameters={}
2025-07-05 07:47:58.978 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 07:47:58.980 [http-nio-8080-exec-8] DEBUG o.s.w.servlet.resource.ResourceHttpRequestHandler - Resource not found
2025-07-05 07:47:58.980 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/chat/completions.]
2025-07-05 07:47:58.980 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-07-05 07:47:58.981 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-07-05 07:47:58.981 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-07-05 07:47:58.983 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-07-05 07:47:58.983 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [{timestamp=Sat Jul 05 07:47:58 CST 2025, status=404, error=Not Found, trace=org.springframework.web. (truncated)...]
2025-07-05 07:47:58.984 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-07-05 07:47:59.012 [ForkJoinPool.commonPool-worker-3] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [36c6b755] [45c59480] Response 404 NOT_FOUND
2025-07-05 07:47:59.048 [ForkJoinPool.commonPool-worker-3] DEBUG org.springframework.web.HttpLogging - [36c6b755] [45c59480] Read 4287 bytes
2025-07-05 07:47:59.075 [ForkJoinPool.commonPool-worker-2] ERROR c.example.agent.pipeline.step.ModelInvocationStep - LLM调用异常
org.springframework.web.reactive.function.client.WebClientResponseException$NotFound: 404 Not Found from POST http://localhost:8080/api/v1/chat/completions
	at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ 404 NOT_FOUND from POST http://localhost:8080/api/v1/chat/completions [DefaultWebClient]
Original Stack Trace:
		at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
		at org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:214)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096)
		at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.checkTerminated(FluxPublish.java:634)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.drain(FluxPublish.java:494)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.onComplete(FluxPublish.java:355)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drainAsync(FluxFlattenIterable.java:371)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drain(FluxFlattenIterable.java:724)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.onComplete(FluxFlattenIterable.java:273)
		at reactor.adapter.JdkFlowAdapter$SubscriberToRS.onComplete(JdkFlowAdapter.java:160)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.complete(ResponseSubscribers.java:955)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$1(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture$UniAccept.tryFire(CompletableFuture.java:718)
		at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
		at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2179)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$subscribe$3(ResponseSubscribers.java:983)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:757)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)
		at java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2214)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.subscribe(ResponseSubscribers.java:979)
		at reactor.adapter.JdkFlowAdapter$FlowPublisherAsFlux.subscribe(JdkFlowAdapter.java:68)
		at reactor.core.publisher.InternalFluxOperator.subscribe(InternalFluxOperator.java:68)
		at reactor.core.publisher.FluxPublish.connect(FluxPublish.java:106)
		at reactor.core.publisher.FluxAutoConnect.subscribe(FluxAutoConnect.java:62)
		at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
		at org.springframework.http.client.reactive.AbstractClientHttpResponse$SingleSubscriberPublisher.subscribe(AbstractClientHttpResponse.java:112)
		at reactor.core.publisher.FluxSource.subscribe(FluxSource.java:71)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)
		at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onNext(FluxDoFinally.java:113)
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)
		at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854)
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)
		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)
		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:294)
		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:188)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)
		at reactor.core.publisher.MonoCompletionStage$MonoCompletionStageSubscription.apply(MonoCompletionStage.java:121)
		at reactor.core.publisher.MonoCompletionStage$MonoCompletionStageSubscription.apply(MonoCompletionStage.java:67)
		at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
		at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
		at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
		at java.base/java.util.concurrent.CompletableFuture.postFire(CompletableFuture.java:614)
		at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:844)
		at java.base/java.util.concurrent.CompletableFuture$Completion.exec(CompletableFuture.java:483)
		at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
		at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
		at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
		at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
		at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at com.example.agent.pipeline.step.ModelInvocationStep.callLLM(ModelInvocationStep.java:131)
		at com.example.agent.pipeline.step.ModelInvocationStep.doExecute(ModelInvocationStep.java:68)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:49)
		at com.example.agent.pipeline.template.AbstractPipelineStep.executeNext(AbstractPipelineStep.java:87)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:56)
		at com.example.agent.pipeline.template.AbstractPipelineStep.executeNext(AbstractPipelineStep.java:87)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:56)
		at com.example.agent.pipeline.template.AbstractPipelineStep.executeNext(AbstractPipelineStep.java:87)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:56)
		at com.example.agent.pipeline.service.AgentPipelineService.executeChainWithProgress(AgentPipelineService.java:228)
		at com.example.agent.pipeline.service.AgentPipelineService.processWithProgress(AgentPipelineService.java:184)
		at com.example.agent.pipeline.service.AgentPipelineService.lambda$processQueryAsync$1(AgentPipelineService.java:162)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
		at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
		at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
		at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
		at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
		at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-05 07:47:59.078 [ForkJoinPool.commonPool-worker-2] ERROR c.example.agent.pipeline.step.ModelInvocationStep - 模型调用失败，未返回响应
2025-07-05 07:47:59.078 [ForkJoinPool.commonPool-worker-2] WARN  c.example.agent.pipeline.step.ModelInvocationStep - 步骤 MODEL_INVOCATION 执行失败
2025-07-05 07:47:59.078 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step completed: PLANNING
2025-07-05 07:47:59.079 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: STEP_COMPLETED
2025-07-05 07:47:59.080 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Progress update: PLANNING - 25.0% - 完成步骤 1/4
2025-07-05 07:47:59.081 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: PROGRESS
2025-07-05 07:47:59.081 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step started: KNOWLEDGE_RECALL
2025-07-05 07:47:59.081 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: STEP_STARTED
2025-07-05 07:47:59.081 [ForkJoinPool.commonPool-worker-2] DEBUG c.example.agent.pipeline.step.KnowledgeRecallStep - 开始执行步骤: KNOWLEDGE_RECALL, 查询ID: query_1751672878882_4d888f99
2025-07-05 07:47:59.081 [ForkJoinPool.commonPool-worker-2] INFO  c.example.agent.pipeline.step.KnowledgeRecallStep - 步骤 KNOWLEDGE_RECALL 可以跳过，继续下一步
2025-07-05 07:47:59.081 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.step.PromptConstructionStep - 开始执行步骤: PROMPT_CONSTRUCTION, 查询ID: query_1751672878882_4d888f99
2025-07-05 07:47:59.081 [ForkJoinPool.commonPool-worker-2] INFO  c.e.agent.pipeline.step.PromptConstructionStep - 步骤 PROMPT_CONSTRUCTION 可以跳过，继续下一步
2025-07-05 07:47:59.081 [ForkJoinPool.commonPool-worker-2] DEBUG c.example.agent.pipeline.step.ModelInvocationStep - 开始执行步骤: MODEL_INVOCATION, 查询ID: query_1751672878882_4d888f99
2025-07-05 07:47:59.082 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [114478c1] HTTP POST http://localhost:8080/api/v1/chat/completions
2025-07-05 07:47:59.083 [ForkJoinPool.commonPool-worker-2] DEBUG org.springframework.web.HttpLogging - [114478c1] Encoding [{max_tokens=2000, stream=false, temperature=0.7, messages=[{role=system, content=你是一个专业的知识助手。请基于以下知识 (truncated)...]
2025-07-05 07:47:59.086 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/chat/completions", parameters={}
2025-07-05 07:47:59.087 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 07:47:59.091 [http-nio-8080-exec-9] DEBUG o.s.w.servlet.resource.ResourceHttpRequestHandler - Resource not found
2025-07-05 07:47:59.092 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/chat/completions.]
2025-07-05 07:47:59.092 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-07-05 07:47:59.092 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-07-05 07:47:59.092 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-07-05 07:47:59.094 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-07-05 07:47:59.094 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [{timestamp=Sat Jul 05 07:47:59 CST 2025, status=404, error=Not Found, trace=org.springframework.web. (truncated)...]
2025-07-05 07:47:59.095 [http-nio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-07-05 07:47:59.096 [ForkJoinPool.commonPool-worker-3] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [114478c1] [773214c4] Response 404 NOT_FOUND
2025-07-05 07:47:59.097 [ForkJoinPool.commonPool-worker-3] DEBUG org.springframework.web.HttpLogging - [114478c1] [773214c4] Read 4287 bytes
2025-07-05 07:47:59.100 [ForkJoinPool.commonPool-worker-2] ERROR c.example.agent.pipeline.step.ModelInvocationStep - LLM调用异常
org.springframework.web.reactive.function.client.WebClientResponseException$NotFound: 404 Not Found from POST http://localhost:8080/api/v1/chat/completions
	at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ 404 NOT_FOUND from POST http://localhost:8080/api/v1/chat/completions [DefaultWebClient]
Original Stack Trace:
		at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
		at org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:214)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096)
		at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.checkTerminated(FluxPublish.java:634)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.drain(FluxPublish.java:494)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.onComplete(FluxPublish.java:355)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drainAsync(FluxFlattenIterable.java:371)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drain(FluxFlattenIterable.java:724)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.onComplete(FluxFlattenIterable.java:273)
		at reactor.adapter.JdkFlowAdapter$SubscriberToRS.onComplete(JdkFlowAdapter.java:160)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.complete(ResponseSubscribers.java:955)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$1(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture$UniAccept.tryFire(CompletableFuture.java:718)
		at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
		at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2179)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$subscribe$3(ResponseSubscribers.java:983)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:757)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)
		at java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2214)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.subscribe(ResponseSubscribers.java:979)
		at reactor.adapter.JdkFlowAdapter$FlowPublisherAsFlux.subscribe(JdkFlowAdapter.java:68)
		at reactor.core.publisher.InternalFluxOperator.subscribe(InternalFluxOperator.java:68)
		at reactor.core.publisher.FluxPublish.connect(FluxPublish.java:106)
		at reactor.core.publisher.FluxAutoConnect.subscribe(FluxAutoConnect.java:62)
		at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
		at org.springframework.http.client.reactive.AbstractClientHttpResponse$SingleSubscriberPublisher.subscribe(AbstractClientHttpResponse.java:112)
		at reactor.core.publisher.FluxSource.subscribe(FluxSource.java:71)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)
		at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onNext(FluxDoFinally.java:113)
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)
		at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854)
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)
		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)
		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:294)
		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:188)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)
		at reactor.core.publisher.MonoCompletionStage$MonoCompletionStageSubscription.apply(MonoCompletionStage.java:121)
		at reactor.core.publisher.MonoCompletionStage$MonoCompletionStageSubscription.apply(MonoCompletionStage.java:67)
		at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
		at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
		at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
		at java.base/java.util.concurrent.CompletableFuture.postFire(CompletableFuture.java:614)
		at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:844)
		at java.base/java.util.concurrent.CompletableFuture$Completion.exec(CompletableFuture.java:483)
		at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
		at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
		at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
		at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
		at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at com.example.agent.pipeline.step.ModelInvocationStep.callLLM(ModelInvocationStep.java:131)
		at com.example.agent.pipeline.step.ModelInvocationStep.doExecute(ModelInvocationStep.java:68)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:49)
		at com.example.agent.pipeline.template.AbstractPipelineStep.executeNext(AbstractPipelineStep.java:87)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:45)
		at com.example.agent.pipeline.template.AbstractPipelineStep.executeNext(AbstractPipelineStep.java:87)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:45)
		at com.example.agent.pipeline.service.AgentPipelineService.executeChainWithProgress(AgentPipelineService.java:228)
		at com.example.agent.pipeline.service.AgentPipelineService.processWithProgress(AgentPipelineService.java:184)
		at com.example.agent.pipeline.service.AgentPipelineService.lambda$processQueryAsync$1(AgentPipelineService.java:162)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
		at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
		at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
		at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
		at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
		at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-05 07:47:59.100 [ForkJoinPool.commonPool-worker-2] ERROR c.example.agent.pipeline.step.ModelInvocationStep - 模型调用失败，未返回响应
2025-07-05 07:47:59.100 [ForkJoinPool.commonPool-worker-2] WARN  c.example.agent.pipeline.step.ModelInvocationStep - 步骤 MODEL_INVOCATION 执行失败
2025-07-05 07:47:59.100 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step completed: KNOWLEDGE_RECALL
2025-07-05 07:47:59.101 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: STEP_COMPLETED
2025-07-05 07:47:59.101 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Progress update: KNOWLEDGE_RECALL - 50.0% - 完成步骤 2/4
2025-07-05 07:47:59.102 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: PROGRESS
2025-07-05 07:47:59.102 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step started: PROMPT_CONSTRUCTION
2025-07-05 07:47:59.103 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: STEP_STARTED
2025-07-05 07:47:59.103 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.step.PromptConstructionStep - 开始执行步骤: PROMPT_CONSTRUCTION, 查询ID: query_1751672878882_4d888f99
2025-07-05 07:47:59.103 [ForkJoinPool.commonPool-worker-2] INFO  c.e.agent.pipeline.step.PromptConstructionStep - 步骤 PROMPT_CONSTRUCTION 可以跳过，继续下一步
2025-07-05 07:47:59.103 [ForkJoinPool.commonPool-worker-2] DEBUG c.example.agent.pipeline.step.ModelInvocationStep - 开始执行步骤: MODEL_INVOCATION, 查询ID: query_1751672878882_4d888f99
2025-07-05 07:47:59.104 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [6bef02ea] HTTP POST http://localhost:8080/api/v1/chat/completions
2025-07-05 07:47:59.105 [ForkJoinPool.commonPool-worker-2] DEBUG org.springframework.web.HttpLogging - [6bef02ea] Encoding [{max_tokens=2000, stream=false, temperature=0.7, messages=[{role=system, content=你是一个专业的知识助手。请基于以下知识 (truncated)...]
2025-07-05 07:47:59.108 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/chat/completions", parameters={}
2025-07-05 07:47:59.109 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 07:47:59.111 [http-nio-8080-exec-10] DEBUG o.s.w.servlet.resource.ResourceHttpRequestHandler - Resource not found
2025-07-05 07:47:59.111 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/chat/completions.]
2025-07-05 07:47:59.111 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-07-05 07:47:59.111 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-07-05 07:47:59.112 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-07-05 07:47:59.113 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-07-05 07:47:59.113 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [{timestamp=Sat Jul 05 07:47:59 CST 2025, status=404, error=Not Found, trace=org.springframework.web. (truncated)...]
2025-07-05 07:47:59.114 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-07-05 07:47:59.115 [ForkJoinPool.commonPool-worker-3] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [6bef02ea] [6e1a4953] Response 404 NOT_FOUND
2025-07-05 07:47:59.116 [ForkJoinPool.commonPool-worker-3] DEBUG org.springframework.web.HttpLogging - [6bef02ea] [6e1a4953] Read 4287 bytes
2025-07-05 07:47:59.117 [ForkJoinPool.commonPool-worker-2] ERROR c.example.agent.pipeline.step.ModelInvocationStep - LLM调用异常
org.springframework.web.reactive.function.client.WebClientResponseException$NotFound: 404 Not Found from POST http://localhost:8080/api/v1/chat/completions
	at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ 404 NOT_FOUND from POST http://localhost:8080/api/v1/chat/completions [DefaultWebClient]
Original Stack Trace:
		at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
		at org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:214)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096)
		at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.checkTerminated(FluxPublish.java:634)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.drain(FluxPublish.java:494)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.onComplete(FluxPublish.java:355)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drainAsync(FluxFlattenIterable.java:371)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drain(FluxFlattenIterable.java:724)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.onComplete(FluxFlattenIterable.java:273)
		at reactor.adapter.JdkFlowAdapter$SubscriberToRS.onComplete(JdkFlowAdapter.java:160)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.complete(ResponseSubscribers.java:955)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$1(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture$UniAccept.tryFire(CompletableFuture.java:718)
		at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
		at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2179)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$subscribe$3(ResponseSubscribers.java:983)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:757)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)
		at java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2214)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.subscribe(ResponseSubscribers.java:979)
		at reactor.adapter.JdkFlowAdapter$FlowPublisherAsFlux.subscribe(JdkFlowAdapter.java:68)
		at reactor.core.publisher.InternalFluxOperator.subscribe(InternalFluxOperator.java:68)
		at reactor.core.publisher.FluxPublish.connect(FluxPublish.java:106)
		at reactor.core.publisher.FluxAutoConnect.subscribe(FluxAutoConnect.java:62)
		at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
		at org.springframework.http.client.reactive.AbstractClientHttpResponse$SingleSubscriberPublisher.subscribe(AbstractClientHttpResponse.java:112)
		at reactor.core.publisher.FluxSource.subscribe(FluxSource.java:71)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)
		at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onNext(FluxDoFinally.java:113)
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)
		at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854)
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)
		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)
		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:294)
		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:188)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)
		at reactor.core.publisher.MonoCompletionStage$MonoCompletionStageSubscription.apply(MonoCompletionStage.java:121)
		at reactor.core.publisher.MonoCompletionStage$MonoCompletionStageSubscription.apply(MonoCompletionStage.java:67)
		at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
		at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
		at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
		at java.base/java.util.concurrent.CompletableFuture.postFire(CompletableFuture.java:614)
		at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:844)
		at java.base/java.util.concurrent.CompletableFuture$Completion.exec(CompletableFuture.java:483)
		at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
		at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
		at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
		at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
		at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at com.example.agent.pipeline.step.ModelInvocationStep.callLLM(ModelInvocationStep.java:131)
		at com.example.agent.pipeline.step.ModelInvocationStep.doExecute(ModelInvocationStep.java:68)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:49)
		at com.example.agent.pipeline.template.AbstractPipelineStep.executeNext(AbstractPipelineStep.java:87)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:45)
		at com.example.agent.pipeline.service.AgentPipelineService.executeChainWithProgress(AgentPipelineService.java:228)
		at com.example.agent.pipeline.service.AgentPipelineService.processWithProgress(AgentPipelineService.java:184)
		at com.example.agent.pipeline.service.AgentPipelineService.lambda$processQueryAsync$1(AgentPipelineService.java:162)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
		at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
		at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
		at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
		at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
		at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-05 07:47:59.117 [ForkJoinPool.commonPool-worker-2] ERROR c.example.agent.pipeline.step.ModelInvocationStep - 模型调用失败，未返回响应
2025-07-05 07:47:59.117 [ForkJoinPool.commonPool-worker-2] WARN  c.example.agent.pipeline.step.ModelInvocationStep - 步骤 MODEL_INVOCATION 执行失败
2025-07-05 07:47:59.117 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step completed: PROMPT_CONSTRUCTION
2025-07-05 07:47:59.118 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: STEP_COMPLETED
2025-07-05 07:47:59.118 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Progress update: PROMPT_CONSTRUCTION - 75.0% - 完成步骤 3/4
2025-07-05 07:47:59.126 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: PROGRESS
2025-07-05 07:47:59.126 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step started: MODEL_INVOCATION
2025-07-05 07:47:59.127 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: STEP_STARTED
2025-07-05 07:47:59.127 [ForkJoinPool.commonPool-worker-2] DEBUG c.example.agent.pipeline.step.ModelInvocationStep - 开始执行步骤: MODEL_INVOCATION, 查询ID: query_1751672878882_4d888f99
2025-07-05 07:47:59.128 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [49802bd0] HTTP POST http://localhost:8080/api/v1/chat/completions
2025-07-05 07:47:59.129 [ForkJoinPool.commonPool-worker-2] DEBUG org.springframework.web.HttpLogging - [49802bd0] Encoding [{max_tokens=2000, stream=false, temperature=0.7, messages=[{role=system, content=你是一个专业的知识助手。请基于以下知识 (truncated)...]
2025-07-05 07:47:59.133 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/chat/completions", parameters={}
2025-07-05 07:47:59.134 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 07:47:59.135 [http-nio-8080-exec-1] DEBUG o.s.w.servlet.resource.ResourceHttpRequestHandler - Resource not found
2025-07-05 07:47:59.135 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/chat/completions.]
2025-07-05 07:47:59.135 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-07-05 07:47:59.136 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-07-05 07:47:59.136 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-07-05 07:47:59.137 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-07-05 07:47:59.137 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [{timestamp=Sat Jul 05 07:47:59 CST 2025, status=404, error=Not Found, trace=org.springframework.web. (truncated)...]
2025-07-05 07:47:59.140 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-07-05 07:47:59.141 [ForkJoinPool.commonPool-worker-3] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [49802bd0] [5980daae] Response 404 NOT_FOUND
2025-07-05 07:47:59.142 [HttpClient-134-Worker-2] DEBUG org.springframework.web.HttpLogging - [49802bd0] [5980daae] Read 4287 bytes
2025-07-05 07:47:59.143 [ForkJoinPool.commonPool-worker-2] ERROR c.example.agent.pipeline.step.ModelInvocationStep - LLM调用异常
org.springframework.web.reactive.function.client.WebClientResponseException$NotFound: 404 Not Found from POST http://localhost:8080/api/v1/chat/completions
	at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ 404 NOT_FOUND from POST http://localhost:8080/api/v1/chat/completions [DefaultWebClient]
Original Stack Trace:
		at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
		at org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:214)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096)
		at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.checkTerminated(FluxPublish.java:634)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.drain(FluxPublish.java:494)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.onComplete(FluxPublish.java:355)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drainAsync(FluxFlattenIterable.java:371)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drain(FluxFlattenIterable.java:724)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.onComplete(FluxFlattenIterable.java:273)
		at reactor.adapter.JdkFlowAdapter$SubscriberToRS.onComplete(JdkFlowAdapter.java:160)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.complete(ResponseSubscribers.java:955)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$1(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:757)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)
		at java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2214)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$2(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)
		at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
		at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
		at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2179)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.signalComplete(ResponseSubscribers.java:972)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.onComplete(ResponseSubscribers.java:1058)
		at java.net.http/jdk.internal.net.http.common.HttpBodySubscriberWrapper.complete(HttpBodySubscriberWrapper.java:293)
		at java.net.http/jdk.internal.net.http.common.HttpBodySubscriberWrapper.onComplete(HttpBodySubscriberWrapper.java:401)
		at java.net.http/jdk.internal.net.http.ResponseContent$ChunkedBodyParser.accept(ResponseContent.java:220)
		at java.net.http/jdk.internal.net.http.ResponseContent$ChunkedBodyParser.accept(ResponseContent.java:131)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.handle(Http1Response.java:707)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.handle(Http1Response.java:635)
		at java.net.http/jdk.internal.net.http.Http1Response$Receiver.accept(Http1Response.java:527)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.tryAsyncReceive(Http1Response.java:665)
		at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:233)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:182)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:207)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
		at java.base/java.lang.Thread.run(Thread.java:1583)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at com.example.agent.pipeline.step.ModelInvocationStep.callLLM(ModelInvocationStep.java:131)
		at com.example.agent.pipeline.step.ModelInvocationStep.doExecute(ModelInvocationStep.java:68)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:49)
		at com.example.agent.pipeline.service.AgentPipelineService.executeChainWithProgress(AgentPipelineService.java:228)
		at com.example.agent.pipeline.service.AgentPipelineService.processWithProgress(AgentPipelineService.java:184)
		at com.example.agent.pipeline.service.AgentPipelineService.lambda$processQueryAsync$1(AgentPipelineService.java:162)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
		at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
		at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
		at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
		at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
		at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-05 07:47:59.144 [ForkJoinPool.commonPool-worker-2] ERROR c.example.agent.pipeline.step.ModelInvocationStep - 模型调用失败，未返回响应
2025-07-05 07:47:59.144 [ForkJoinPool.commonPool-worker-2] WARN  c.example.agent.pipeline.step.ModelInvocationStep - 步骤 MODEL_INVOCATION 执行失败
2025-07-05 07:47:59.144 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step completed: MODEL_INVOCATION
2025-07-05 07:47:59.144 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: STEP_COMPLETED
2025-07-05 07:47:59.145 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Progress update: MODEL_INVOCATION - 100.0% - 完成步骤 4/4
2025-07-05 07:47:59.146 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: PROGRESS
2025-07-05 07:47:59.147 [ForkJoinPool.commonPool-worker-2] INFO  c.e.agent.pipeline.service.AgentPipelineService - 流式处理完成 - 查询ID: query_1751672878882_4d888f99, 耗时: 265ms, 成功: true
2025-07-05 07:47:59.147 [ForkJoinPool.commonPool-worker-2] INFO  c.e.a.pipeline.streaming.StreamingProgressListener - Processing completed: Query processed successfully
2025-07-05 07:47:59.155 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: COMPLETED
2025-07-05 07:48:05.114 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-07-05 07:48:05.171 [Thread-142] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:48:05.216 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:48:24.829 [pool-11-thread-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672876573: HEARTBEAT
2025-07-05 07:48:45.992 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-07-05 07:48:46.026 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 12996 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:48:46.027 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:48:46.027 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:48:46.066 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-07-05 07:48:46.066 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-07-05 07:48:47.351 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:48:47.375 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:48:47.378 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:48:47.378 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:48:47.432 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:48:47.433 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1366 ms
2025-07-05 07:48:47.592 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-05 07:48:47.735 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:48:47.737 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-05 07:48:48.422 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:48:48.423 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:48:48.423 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:48:48.423 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:48:48.551 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 5 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:48:48.595 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:48:48.620 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:48:48.648 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:48:48.701 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:48:48.714 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:48:48.715 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:48:48.715 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:48:48.715 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:48:48.813 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-07-05 07:48:48.814 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn5: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:48:48.815 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-07-05 07:48:48.815 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:48:48.853 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:48:48.864 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:48:48.875 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:48:48.884 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 3.364 seconds (process running for 3.699)
2025-07-05 07:48:49.000 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-05 07:48:49.000 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-05 07:48:49.000 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-07-05 07:48:49.000 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-07-05 07:48:49.000 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-07-05 07:48:49.000 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2117f3e9
2025-07-05 07:48:49.001 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@568c45f2
2025-07-05 07:48:49.001 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-07-05 07:48:49.001 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-05 07:48:49.009 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/sse-test.html", parameters={}
2025-07-05 07:48:49.020 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 07:48:49.030 [http-nio-8080-exec-1] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-05 07:48:51.256 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/ai/stream/connect?sessionId=session_1751672931251", parameters={masked}
2025-07-05 07:48:51.257 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.agent.pipeline.controller.ChatController#streamConnect(String)
2025-07-05 07:48:51.268 [http-nio-8080-exec-2] INFO  c.e.agent.pipeline.streaming.StreamingService - Created new SSE connection for session: session_1751672931251
2025-07-05 07:48:51.291 [http-nio-8080-exec-2] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: STEP_STARTED
2025-07-05 07:48:51.294 [http-nio-8080-exec-2] DEBUG o.s.web.context.request.async.WebAsyncManager - Started async request for "/ai/stream/connect"
2025-07-05 07:48:51.298 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting but response remains open for further handling
2025-07-05 07:48:52.579 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/ai/stream/chat?message=%E5%91%8A%E8%AF%89%E6%88%91%E4%B8%80%E4%B8%AA%E5%85%B3%E4%BA%8EAI%E7%9A%84%E6%95%85%E4%BA%8B&sessionId=session_1751672931251", parameters={masked}
2025-07-05 07:48:52.579 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.agent.pipeline.controller.ChatController#streamChat(String, String)
2025-07-05 07:48:52.581 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step started: initialization
2025-07-05 07:48:52.582 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: STEP_STARTED
2025-07-05 07:48:52.583 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step completed: initialization
2025-07-05 07:48:52.583 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-07-05 07:48:52.583 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: STEP_COMPLETED
2025-07-05 07:48:52.583 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Nothing to write: null body
2025-07-05 07:48:52.583 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step started: PLANNING
2025-07-05 07:48:52.584 [http-nio-8080-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-05 07:48:52.584 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: STEP_STARTED
2025-07-05 07:48:52.584 [ForkJoinPool.commonPool-worker-1] DEBUG com.example.agent.pipeline.step.PlanningStep - 开始执行步骤: PLANNING, 查询ID: query_1751672932581_05b6cfa6
2025-07-05 07:48:52.586 [ForkJoinPool.commonPool-worker-1] DEBUG com.example.agent.pipeline.step.PlanningStep - 步骤 PLANNING 执行耗时: 2ms
2025-07-05 07:48:52.586 [ForkJoinPool.commonPool-worker-1] INFO  com.example.agent.pipeline.step.PlanningStep - 查询规划完成 - 查询ID: query_1751672932581_05b6cfa6, 意图: GENERAL, 策略: [VECTOR_STORE]
2025-07-05 07:48:52.586 [ForkJoinPool.commonPool-worker-1] DEBUG com.example.agent.pipeline.step.PlanningStep - 步骤 PLANNING 执行成功
2025-07-05 07:48:52.586 [ForkJoinPool.commonPool-worker-1] DEBUG c.example.agent.pipeline.step.KnowledgeRecallStep - 开始执行步骤: KNOWLEDGE_RECALL, 查询ID: query_1751672932581_05b6cfa6
2025-07-05 07:48:52.586 [ForkJoinPool.commonPool-worker-2] DEBUG c.example.agent.pipeline.step.KnowledgeRecallStep - 执行知识检索策略: VECTOR_STORE
2025-07-05 07:48:52.587 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.k.repository.impl.VectorStoreRepositoryImpl - Vector store health check: 0 chunks stored
2025-07-05 07:48:52.588 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.knowledge.strategy.VectorStoreStrategyImpl - Performing semantic search for query: '告诉我一个关于AI的故事' with threshold: 0.7 and limit: 10
2025-07-05 07:48:52.589 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.k.repository.impl.VectorStoreRepositoryImpl - Performing semantic search with query: 告诉我一个关于AI的故事, topK: 10, threshold: 0.7
2025-07-05 07:48:52.591 [ForkJoinPool.commonPool-worker-2] DEBUG c.e.a.knowledge.strategy.VectorStoreStrategyImpl - Vector store search returned 0 results
2025-07-05 07:48:52.591 [ForkJoinPool.commonPool-worker-2] DEBUG c.example.agent.pipeline.step.KnowledgeRecallStep - 策略 VECTOR_STORE 检索到 0 个知识块
2025-07-05 07:48:52.591 [ForkJoinPool.commonPool-worker-1] DEBUG c.example.agent.pipeline.step.KnowledgeRecallStep - 步骤 KNOWLEDGE_RECALL 执行耗时: 5ms
2025-07-05 07:48:52.591 [ForkJoinPool.commonPool-worker-1] INFO  c.example.agent.pipeline.step.KnowledgeRecallStep - 知识召回完成 - 查询ID: query_1751672932581_05b6cfa6, 检索到 0 个知识块
2025-07-05 07:48:52.591 [ForkJoinPool.commonPool-worker-1] DEBUG c.example.agent.pipeline.step.KnowledgeRecallStep - 步骤 KNOWLEDGE_RECALL 执行成功
2025-07-05 07:48:52.591 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.step.PromptConstructionStep - 开始执行步骤: PROMPT_CONSTRUCTION, 查询ID: query_1751672932581_05b6cfa6
2025-07-05 07:48:52.591 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.step.PromptConstructionStep - 步骤 PROMPT_CONSTRUCTION 执行耗时: 0ms
2025-07-05 07:48:52.592 [ForkJoinPool.commonPool-worker-1] INFO  c.e.agent.pipeline.step.PromptConstructionStep - Prompt构建完成 - 查询ID: query_1751672932581_05b6cfa6, 提示长度: 163, 知识块数: 0
2025-07-05 07:48:52.592 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.step.PromptConstructionStep - 步骤 PROMPT_CONSTRUCTION 执行成功
2025-07-05 07:48:52.592 [ForkJoinPool.commonPool-worker-1] DEBUG c.example.agent.pipeline.step.ModelInvocationStep - 开始执行步骤: MODEL_INVOCATION, 查询ID: query_1751672932581_05b6cfa6
2025-07-05 07:48:52.624 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [3f8b3cb4] HTTP POST http://localhost:8080/api/v1/chat/completions
2025-07-05 07:48:52.629 [ForkJoinPool.commonPool-worker-1] DEBUG org.springframework.web.HttpLogging - [3f8b3cb4] Encoding [{max_tokens=2000, stream=false, temperature=0.7, messages=[{role=system, content=你是一个专业的知识助手。请基于以下知识 (truncated)...]
2025-07-05 07:48:52.664 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/chat/completions", parameters={}
2025-07-05 07:48:52.664 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 07:48:52.665 [http-nio-8080-exec-4] DEBUG o.s.w.servlet.resource.ResourceHttpRequestHandler - Resource not found
2025-07-05 07:48:52.666 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/chat/completions.]
2025-07-05 07:48:52.667 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-07-05 07:48:52.670 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-07-05 07:48:52.670 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-07-05 07:48:52.673 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-07-05 07:48:52.674 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [{timestamp=Sat Jul 05 07:48:52 CST 2025, status=404, error=Not Found, trace=org.springframework.web. (truncated)...]
2025-07-05 07:48:52.678 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-07-05 07:48:52.689 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [3f8b3cb4] [2fe42ad5] Response 404 NOT_FOUND
2025-07-05 07:48:52.703 [HttpClient-4-Worker-1] DEBUG org.springframework.web.HttpLogging - [3f8b3cb4] [2fe42ad5] Read 4287 bytes
2025-07-05 07:48:52.709 [ForkJoinPool.commonPool-worker-1] ERROR c.example.agent.pipeline.step.ModelInvocationStep - LLM调用异常
org.springframework.web.reactive.function.client.WebClientResponseException$NotFound: 404 Not Found from POST http://localhost:8080/api/v1/chat/completions
	at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ 404 NOT_FOUND from POST http://localhost:8080/api/v1/chat/completions [DefaultWebClient]
Original Stack Trace:
		at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
		at org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:214)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096)
		at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.checkTerminated(FluxPublish.java:634)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.drain(FluxPublish.java:494)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.onComplete(FluxPublish.java:355)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drainAsync(FluxFlattenIterable.java:371)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drain(FluxFlattenIterable.java:724)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.onComplete(FluxFlattenIterable.java:273)
		at reactor.adapter.JdkFlowAdapter$SubscriberToRS.onComplete(JdkFlowAdapter.java:160)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.complete(ResponseSubscribers.java:955)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$1(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:757)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)
		at java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2214)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$2(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)
		at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
		at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
		at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2179)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.signalComplete(ResponseSubscribers.java:972)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.onComplete(ResponseSubscribers.java:1058)
		at java.net.http/jdk.internal.net.http.common.HttpBodySubscriberWrapper.complete(HttpBodySubscriberWrapper.java:293)
		at java.net.http/jdk.internal.net.http.common.HttpBodySubscriberWrapper.onComplete(HttpBodySubscriberWrapper.java:401)
		at java.net.http/jdk.internal.net.http.ResponseContent$ChunkedBodyParser.accept(ResponseContent.java:220)
		at java.net.http/jdk.internal.net.http.ResponseContent$ChunkedBodyParser.accept(ResponseContent.java:131)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.handle(Http1Response.java:707)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.handle(Http1Response.java:635)
		at java.net.http/jdk.internal.net.http.Http1Response$Receiver.accept(Http1Response.java:527)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.tryAsyncReceive(Http1Response.java:665)
		at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:233)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:182)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:207)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
		at java.base/java.lang.Thread.run(Thread.java:1583)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at com.example.agent.pipeline.step.ModelInvocationStep.callLLM(ModelInvocationStep.java:131)
		at com.example.agent.pipeline.step.ModelInvocationStep.doExecute(ModelInvocationStep.java:68)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:49)
		at com.example.agent.pipeline.template.AbstractPipelineStep.executeNext(AbstractPipelineStep.java:87)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:56)
		at com.example.agent.pipeline.template.AbstractPipelineStep.executeNext(AbstractPipelineStep.java:87)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:56)
		at com.example.agent.pipeline.template.AbstractPipelineStep.executeNext(AbstractPipelineStep.java:87)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:56)
		at com.example.agent.pipeline.service.AgentPipelineService.executeChainWithProgress(AgentPipelineService.java:228)
		at com.example.agent.pipeline.service.AgentPipelineService.processWithProgress(AgentPipelineService.java:184)
		at com.example.agent.pipeline.service.AgentPipelineService.lambda$processQueryAsync$1(AgentPipelineService.java:162)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
		at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
		at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
		at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
		at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
		at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-05 07:48:52.712 [ForkJoinPool.commonPool-worker-1] ERROR c.example.agent.pipeline.step.ModelInvocationStep - 模型调用失败，未返回响应
2025-07-05 07:48:52.712 [ForkJoinPool.commonPool-worker-1] WARN  c.example.agent.pipeline.step.ModelInvocationStep - 步骤 MODEL_INVOCATION 执行失败
2025-07-05 07:48:52.712 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step completed: PLANNING
2025-07-05 07:48:52.712 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: STEP_COMPLETED
2025-07-05 07:48:52.712 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Progress update: PLANNING - 25.0% - 完成步骤 1/4
2025-07-05 07:48:52.713 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: PROGRESS
2025-07-05 07:48:52.713 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step started: KNOWLEDGE_RECALL
2025-07-05 07:48:52.713 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: STEP_STARTED
2025-07-05 07:48:52.713 [ForkJoinPool.commonPool-worker-1] DEBUG c.example.agent.pipeline.step.KnowledgeRecallStep - 开始执行步骤: KNOWLEDGE_RECALL, 查询ID: query_1751672932581_05b6cfa6
2025-07-05 07:48:52.713 [ForkJoinPool.commonPool-worker-1] INFO  c.example.agent.pipeline.step.KnowledgeRecallStep - 步骤 KNOWLEDGE_RECALL 可以跳过，继续下一步
2025-07-05 07:48:52.713 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.step.PromptConstructionStep - 开始执行步骤: PROMPT_CONSTRUCTION, 查询ID: query_1751672932581_05b6cfa6
2025-07-05 07:48:52.713 [ForkJoinPool.commonPool-worker-1] INFO  c.e.agent.pipeline.step.PromptConstructionStep - 步骤 PROMPT_CONSTRUCTION 可以跳过，继续下一步
2025-07-05 07:48:52.713 [ForkJoinPool.commonPool-worker-1] DEBUG c.example.agent.pipeline.step.ModelInvocationStep - 开始执行步骤: MODEL_INVOCATION, 查询ID: query_1751672932581_05b6cfa6
2025-07-05 07:48:52.714 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [612568e7] HTTP POST http://localhost:8080/api/v1/chat/completions
2025-07-05 07:48:52.714 [ForkJoinPool.commonPool-worker-1] DEBUG org.springframework.web.HttpLogging - [612568e7] Encoding [{max_tokens=2000, stream=false, temperature=0.7, messages=[{role=system, content=你是一个专业的知识助手。请基于以下知识 (truncated)...]
2025-07-05 07:48:52.716 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/chat/completions", parameters={}
2025-07-05 07:48:52.716 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 07:48:52.717 [http-nio-8080-exec-5] DEBUG o.s.w.servlet.resource.ResourceHttpRequestHandler - Resource not found
2025-07-05 07:48:52.717 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/chat/completions.]
2025-07-05 07:48:52.717 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-07-05 07:48:52.717 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-07-05 07:48:52.718 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-07-05 07:48:52.718 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-07-05 07:48:52.718 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [{timestamp=Sat Jul 05 07:48:52 CST 2025, status=404, error=Not Found, trace=org.springframework.web. (truncated)...]
2025-07-05 07:48:52.719 [http-nio-8080-exec-5] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-07-05 07:48:52.719 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [612568e7] [2eabb105] Response 404 NOT_FOUND
2025-07-05 07:48:52.720 [HttpClient-4-Worker-1] DEBUG org.springframework.web.HttpLogging - [612568e7] [2eabb105] Read 4287 bytes
2025-07-05 07:48:52.720 [ForkJoinPool.commonPool-worker-1] ERROR c.example.agent.pipeline.step.ModelInvocationStep - LLM调用异常
org.springframework.web.reactive.function.client.WebClientResponseException$NotFound: 404 Not Found from POST http://localhost:8080/api/v1/chat/completions
	at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ 404 NOT_FOUND from POST http://localhost:8080/api/v1/chat/completions [DefaultWebClient]
Original Stack Trace:
		at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
		at org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:214)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096)
		at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.checkTerminated(FluxPublish.java:634)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.drain(FluxPublish.java:494)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.onComplete(FluxPublish.java:355)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drainAsync(FluxFlattenIterable.java:371)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drain(FluxFlattenIterable.java:724)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.onComplete(FluxFlattenIterable.java:273)
		at reactor.adapter.JdkFlowAdapter$SubscriberToRS.onComplete(JdkFlowAdapter.java:160)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.complete(ResponseSubscribers.java:955)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$1(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:757)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)
		at java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2214)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$2(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)
		at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
		at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
		at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2179)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.signalComplete(ResponseSubscribers.java:972)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.onComplete(ResponseSubscribers.java:1058)
		at java.net.http/jdk.internal.net.http.common.HttpBodySubscriberWrapper.complete(HttpBodySubscriberWrapper.java:293)
		at java.net.http/jdk.internal.net.http.common.HttpBodySubscriberWrapper.onComplete(HttpBodySubscriberWrapper.java:401)
		at java.net.http/jdk.internal.net.http.ResponseContent$ChunkedBodyParser.accept(ResponseContent.java:220)
		at java.net.http/jdk.internal.net.http.ResponseContent$ChunkedBodyParser.accept(ResponseContent.java:131)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.handle(Http1Response.java:707)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.handle(Http1Response.java:635)
		at java.net.http/jdk.internal.net.http.Http1Response$Receiver.accept(Http1Response.java:527)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.tryAsyncReceive(Http1Response.java:665)
		at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:233)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:182)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:207)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
		at java.base/java.lang.Thread.run(Thread.java:1583)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at com.example.agent.pipeline.step.ModelInvocationStep.callLLM(ModelInvocationStep.java:131)
		at com.example.agent.pipeline.step.ModelInvocationStep.doExecute(ModelInvocationStep.java:68)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:49)
		at com.example.agent.pipeline.template.AbstractPipelineStep.executeNext(AbstractPipelineStep.java:87)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:45)
		at com.example.agent.pipeline.template.AbstractPipelineStep.executeNext(AbstractPipelineStep.java:87)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:45)
		at com.example.agent.pipeline.service.AgentPipelineService.executeChainWithProgress(AgentPipelineService.java:228)
		at com.example.agent.pipeline.service.AgentPipelineService.processWithProgress(AgentPipelineService.java:184)
		at com.example.agent.pipeline.service.AgentPipelineService.lambda$processQueryAsync$1(AgentPipelineService.java:162)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
		at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
		at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
		at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
		at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
		at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-05 07:48:52.721 [ForkJoinPool.commonPool-worker-1] ERROR c.example.agent.pipeline.step.ModelInvocationStep - 模型调用失败，未返回响应
2025-07-05 07:48:52.721 [ForkJoinPool.commonPool-worker-1] WARN  c.example.agent.pipeline.step.ModelInvocationStep - 步骤 MODEL_INVOCATION 执行失败
2025-07-05 07:48:52.721 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step completed: KNOWLEDGE_RECALL
2025-07-05 07:48:52.722 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: STEP_COMPLETED
2025-07-05 07:48:52.722 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Progress update: KNOWLEDGE_RECALL - 50.0% - 完成步骤 2/4
2025-07-05 07:48:52.722 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: PROGRESS
2025-07-05 07:48:52.722 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step started: PROMPT_CONSTRUCTION
2025-07-05 07:48:52.723 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: STEP_STARTED
2025-07-05 07:48:52.723 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.step.PromptConstructionStep - 开始执行步骤: PROMPT_CONSTRUCTION, 查询ID: query_1751672932581_05b6cfa6
2025-07-05 07:48:52.723 [ForkJoinPool.commonPool-worker-1] INFO  c.e.agent.pipeline.step.PromptConstructionStep - 步骤 PROMPT_CONSTRUCTION 可以跳过，继续下一步
2025-07-05 07:48:52.723 [ForkJoinPool.commonPool-worker-1] DEBUG c.example.agent.pipeline.step.ModelInvocationStep - 开始执行步骤: MODEL_INVOCATION, 查询ID: query_1751672932581_05b6cfa6
2025-07-05 07:48:52.723 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [5af02e2d] HTTP POST http://localhost:8080/api/v1/chat/completions
2025-07-05 07:48:52.723 [ForkJoinPool.commonPool-worker-1] DEBUG org.springframework.web.HttpLogging - [5af02e2d] Encoding [{max_tokens=2000, stream=false, temperature=0.7, messages=[{role=system, content=你是一个专业的知识助手。请基于以下知识 (truncated)...]
2025-07-05 07:48:52.725 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/chat/completions", parameters={}
2025-07-05 07:48:52.725 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 07:48:52.726 [http-nio-8080-exec-6] DEBUG o.s.w.servlet.resource.ResourceHttpRequestHandler - Resource not found
2025-07-05 07:48:52.726 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/chat/completions.]
2025-07-05 07:48:52.726 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-07-05 07:48:52.726 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-07-05 07:48:52.727 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-07-05 07:48:52.727 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-07-05 07:48:52.727 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [{timestamp=Sat Jul 05 07:48:52 CST 2025, status=404, error=Not Found, trace=org.springframework.web. (truncated)...]
2025-07-05 07:48:52.728 [http-nio-8080-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-07-05 07:48:52.728 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [5af02e2d] [27be52c1] Response 404 NOT_FOUND
2025-07-05 07:48:52.729 [HttpClient-4-Worker-1] DEBUG org.springframework.web.HttpLogging - [5af02e2d] [27be52c1] Read 4287 bytes
2025-07-05 07:48:52.729 [ForkJoinPool.commonPool-worker-1] ERROR c.example.agent.pipeline.step.ModelInvocationStep - LLM调用异常
org.springframework.web.reactive.function.client.WebClientResponseException$NotFound: 404 Not Found from POST http://localhost:8080/api/v1/chat/completions
	at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ 404 NOT_FOUND from POST http://localhost:8080/api/v1/chat/completions [DefaultWebClient]
Original Stack Trace:
		at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
		at org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:214)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096)
		at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.checkTerminated(FluxPublish.java:634)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.drain(FluxPublish.java:494)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.onComplete(FluxPublish.java:355)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drainAsync(FluxFlattenIterable.java:371)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drain(FluxFlattenIterable.java:724)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.onComplete(FluxFlattenIterable.java:273)
		at reactor.adapter.JdkFlowAdapter$SubscriberToRS.onComplete(JdkFlowAdapter.java:160)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.complete(ResponseSubscribers.java:955)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$1(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:757)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)
		at java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2214)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$2(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)
		at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
		at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
		at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2179)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.signalComplete(ResponseSubscribers.java:972)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.onComplete(ResponseSubscribers.java:1058)
		at java.net.http/jdk.internal.net.http.common.HttpBodySubscriberWrapper.complete(HttpBodySubscriberWrapper.java:293)
		at java.net.http/jdk.internal.net.http.common.HttpBodySubscriberWrapper.onComplete(HttpBodySubscriberWrapper.java:401)
		at java.net.http/jdk.internal.net.http.ResponseContent$ChunkedBodyParser.accept(ResponseContent.java:220)
		at java.net.http/jdk.internal.net.http.ResponseContent$ChunkedBodyParser.accept(ResponseContent.java:131)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.handle(Http1Response.java:707)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.handle(Http1Response.java:635)
		at java.net.http/jdk.internal.net.http.Http1Response$Receiver.accept(Http1Response.java:527)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.tryAsyncReceive(Http1Response.java:665)
		at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:233)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:182)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:207)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
		at java.base/java.lang.Thread.run(Thread.java:1583)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at com.example.agent.pipeline.step.ModelInvocationStep.callLLM(ModelInvocationStep.java:131)
		at com.example.agent.pipeline.step.ModelInvocationStep.doExecute(ModelInvocationStep.java:68)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:49)
		at com.example.agent.pipeline.template.AbstractPipelineStep.executeNext(AbstractPipelineStep.java:87)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:45)
		at com.example.agent.pipeline.service.AgentPipelineService.executeChainWithProgress(AgentPipelineService.java:228)
		at com.example.agent.pipeline.service.AgentPipelineService.processWithProgress(AgentPipelineService.java:184)
		at com.example.agent.pipeline.service.AgentPipelineService.lambda$processQueryAsync$1(AgentPipelineService.java:162)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
		at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
		at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
		at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
		at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
		at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-05 07:48:52.730 [ForkJoinPool.commonPool-worker-1] ERROR c.example.agent.pipeline.step.ModelInvocationStep - 模型调用失败，未返回响应
2025-07-05 07:48:52.730 [ForkJoinPool.commonPool-worker-1] WARN  c.example.agent.pipeline.step.ModelInvocationStep - 步骤 MODEL_INVOCATION 执行失败
2025-07-05 07:48:52.730 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step completed: PROMPT_CONSTRUCTION
2025-07-05 07:48:52.730 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: STEP_COMPLETED
2025-07-05 07:48:52.730 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Progress update: PROMPT_CONSTRUCTION - 75.0% - 完成步骤 3/4
2025-07-05 07:48:52.731 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: PROGRESS
2025-07-05 07:48:52.731 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step started: MODEL_INVOCATION
2025-07-05 07:48:52.731 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: STEP_STARTED
2025-07-05 07:48:52.731 [ForkJoinPool.commonPool-worker-1] DEBUG c.example.agent.pipeline.step.ModelInvocationStep - 开始执行步骤: MODEL_INVOCATION, 查询ID: query_1751672932581_05b6cfa6
2025-07-05 07:48:52.732 [ForkJoinPool.commonPool-worker-1] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [768eba72] HTTP POST http://localhost:8080/api/v1/chat/completions
2025-07-05 07:48:52.732 [ForkJoinPool.commonPool-worker-1] DEBUG org.springframework.web.HttpLogging - [768eba72] Encoding [{max_tokens=2000, stream=false, temperature=0.7, messages=[{role=system, content=你是一个专业的知识助手。请基于以下知识 (truncated)...]
2025-07-05 07:48:52.733 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - POST "/api/v1/chat/completions", parameters={}
2025-07-05 07:48:52.733 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 07:48:52.734 [http-nio-8080-exec-10] DEBUG o.s.w.servlet.resource.ResourceHttpRequestHandler - Resource not found
2025-07-05 07:48:52.734 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/chat/completions.]
2025-07-05 07:48:52.734 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-07-05 07:48:52.735 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-07-05 07:48:52.735 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-07-05 07:48:52.735 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-07-05 07:48:52.735 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.annotation.HttpEntityMethodProcessor - Writing [{timestamp=Sat Jul 05 07:48:52 CST 2025, status=404, error=Not Found, trace=org.springframework.web. (truncated)...]
2025-07-05 07:48:52.736 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-07-05 07:48:52.736 [ForkJoinPool.commonPool-worker-2] DEBUG o.s.web.reactive.function.client.ExchangeFunctions - [768eba72] [7d745be4] Response 404 NOT_FOUND
2025-07-05 07:48:52.737 [HttpClient-4-Worker-1] DEBUG org.springframework.web.HttpLogging - [768eba72] [7d745be4] Read 4287 bytes
2025-07-05 07:48:52.737 [ForkJoinPool.commonPool-worker-1] ERROR c.example.agent.pipeline.step.ModelInvocationStep - LLM调用异常
org.springframework.web.reactive.function.client.WebClientResponseException$NotFound: 404 Not Found from POST http://localhost:8080/api/v1/chat/completions
	at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ 404 NOT_FOUND from POST http://localhost:8080/api/v1/chat/completions [DefaultWebClient]
Original Stack Trace:
		at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324)
		at org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:214)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096)
		at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.checkTerminated(FluxPublish.java:634)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.drain(FluxPublish.java:494)
		at reactor.core.publisher.FluxPublish$PublishSubscriber.onComplete(FluxPublish.java:355)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drainAsync(FluxFlattenIterable.java:371)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drain(FluxFlattenIterable.java:724)
		at reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.onComplete(FluxFlattenIterable.java:273)
		at reactor.adapter.JdkFlowAdapter$SubscriberToRS.onComplete(JdkFlowAdapter.java:160)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.complete(ResponseSubscribers.java:955)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$1(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:757)
		at java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)
		at java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2214)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$2(ResponseSubscribers.java:886)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)
		at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
		at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
		at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2179)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.signalComplete(ResponseSubscribers.java:972)
		at java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.onComplete(ResponseSubscribers.java:1058)
		at java.net.http/jdk.internal.net.http.common.HttpBodySubscriberWrapper.complete(HttpBodySubscriberWrapper.java:293)
		at java.net.http/jdk.internal.net.http.common.HttpBodySubscriberWrapper.onComplete(HttpBodySubscriberWrapper.java:401)
		at java.net.http/jdk.internal.net.http.ResponseContent$ChunkedBodyParser.accept(ResponseContent.java:220)
		at java.net.http/jdk.internal.net.http.ResponseContent$ChunkedBodyParser.accept(ResponseContent.java:131)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.handle(Http1Response.java:707)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.handle(Http1Response.java:635)
		at java.net.http/jdk.internal.net.http.Http1Response$Receiver.accept(Http1Response.java:527)
		at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.tryAsyncReceive(Http1Response.java:665)
		at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:233)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:182)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
		at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:207)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
		at java.base/java.lang.Thread.run(Thread.java:1583)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at com.example.agent.pipeline.step.ModelInvocationStep.callLLM(ModelInvocationStep.java:131)
		at com.example.agent.pipeline.step.ModelInvocationStep.doExecute(ModelInvocationStep.java:68)
		at com.example.agent.pipeline.template.AbstractPipelineStep.execute(AbstractPipelineStep.java:49)
		at com.example.agent.pipeline.service.AgentPipelineService.executeChainWithProgress(AgentPipelineService.java:228)
		at com.example.agent.pipeline.service.AgentPipelineService.processWithProgress(AgentPipelineService.java:184)
		at com.example.agent.pipeline.service.AgentPipelineService.lambda$processQueryAsync$1(AgentPipelineService.java:162)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
		at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)
		at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
		at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1310)
		at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
		at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
		at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)
2025-07-05 07:48:52.737 [ForkJoinPool.commonPool-worker-1] ERROR c.example.agent.pipeline.step.ModelInvocationStep - 模型调用失败，未返回响应
2025-07-05 07:48:52.737 [ForkJoinPool.commonPool-worker-1] WARN  c.example.agent.pipeline.step.ModelInvocationStep - 步骤 MODEL_INVOCATION 执行失败
2025-07-05 07:48:52.737 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Step completed: MODEL_INVOCATION
2025-07-05 07:48:52.738 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: STEP_COMPLETED
2025-07-05 07:48:52.738 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.a.pipeline.streaming.StreamingProgressListener - Progress update: MODEL_INVOCATION - 100.0% - 完成步骤 4/4
2025-07-05 07:48:52.738 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: PROGRESS
2025-07-05 07:48:52.739 [ForkJoinPool.commonPool-worker-1] INFO  c.e.agent.pipeline.service.AgentPipelineService - 流式处理完成 - 查询ID: query_1751672932581_05b6cfa6, 耗时: 158ms, 成功: true
2025-07-05 07:48:52.739 [ForkJoinPool.commonPool-worker-1] INFO  c.e.a.pipeline.streaming.StreamingProgressListener - Processing completed: Query processed successfully
2025-07-05 07:48:52.740 [ForkJoinPool.commonPool-worker-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: COMPLETED
2025-07-05 07:49:18.420 [pool-2-thread-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: HEARTBEAT
2025-07-05 07:49:42.619 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - GET "/ai/chat?message=%E4%BD%A0%E5%A5%BD", parameters={masked}
2025-07-05 07:49:42.619 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.agent.pipeline.controller.ChatController#chat(String)
2025-07-05 07:49:42.722 [http-nio-8080-exec-8] DEBUG org.springframework.web.client.DefaultRestClient - Writing [ChatCompletionRequest[messages=[ChatCompletionMessage[rawContent=你好, role=USER, name=null, toolCallId=null, toolCalls=null, refusal=null, audioOutput=null, annotations=null]], model=deepseek-reasoner, store=null, metadata=null, frequencyPenalty=null, logitBias=null, logprobs=null, topLogprobs=null, maxTokens=2048, maxCompletionTokens=null, n=null, outputModalities=null, audioParameters=null, presencePenalty=null, responseFormat=null, seed=null, serviceTier=null, stop=null, stream=false, streamOptions=null, temperature=0.7, topP=null, tools=null, toolChoice=null, parallelToolCalls=null, user=null, reasoningEffort=null, webSearchOptions=null]] as "application/json" with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2025-07-05 07:49:48.420 [pool-2-thread-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: HEARTBEAT
2025-07-05 07:49:55.567 [http-nio-8080-exec-8] DEBUG org.springframework.web.client.DefaultRestClient - Reading to [org.springframework.ai.openai.api.OpenAiApi$ChatCompletion]
2025-07-05 07:49:55.578 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-07-05 07:49:55.579 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing ["你好呀！👋 很高兴见到你～  <EOL>有什么我可以帮你的吗？无论是解答问题、查资料、聊天放松，还是需要建议，我都在这儿呢！  <EOL>请随时告诉我你的需求吧 😊"]
2025-07-05 07:49:55.579 [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-07-05 07:50:18.412 [pool-2-thread-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: HEARTBEAT
2025-07-05 07:50:48.426 [pool-2-thread-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: HEARTBEAT
2025-07-05 07:51:18.411 [pool-2-thread-1] DEBUG c.e.agent.pipeline.streaming.StreamingService - Sent event to session session_1751672931251: HEARTBEAT
2025-07-05 07:51:48.411 [http-nio-8080-exec-4] DEBUG o.s.web.context.request.async.WebAsyncManager - Servlet container error notification for "/ai/stream/connect"
2025-07-05 07:51:48.411 [pool-2-thread-1] ERROR c.e.agent.pipeline.streaming.StreamingService - Failed to send event to session: session_1751672931251
org.springframework.web.context.request.async.AsyncRequestNotUsableException: ServletOutputStream failed to flush: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse.handleIOException(StandardServletAsyncWebRequest.java:346)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.flush(StandardServletAsyncWebRequest.java:418)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:137)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:235)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:310)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.send(ResponseBodyEmitterReturnValueHandler.java:297)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:226)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:217)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at com.example.agent.pipeline.streaming.StreamingService.sendEvent(StreamingService.java:92)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$4(StreamingService.java:164)
	at java.base/java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1603)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$5(StreamingService.java:162)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.catalina.connector.ClientAbortException: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:304)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:266)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:133)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.flush(StandardServletAsyncWebRequest.java:415)
	... 19 common frames omitted
Caused by: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:542)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:125)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1411)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:732)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:698)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:683)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:574)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:156)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:216)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1271)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:408)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:300)
	... 22 common frames omitted
2025-07-05 07:51:48.412 [http-nio-8080-exec-4] ERROR c.e.agent.pipeline.streaming.StreamingService - SSE connection error for session: session_1751672931251
java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:542)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:125)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1411)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:732)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:698)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:683)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:574)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:156)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:216)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1271)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:408)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:300)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:266)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:133)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.flush(StandardServletAsyncWebRequest.java:415)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:137)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:235)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:310)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.send(ResponseBodyEmitterReturnValueHandler.java:297)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:226)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:217)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at com.example.agent.pipeline.streaming.StreamingService.sendEvent(StreamingService.java:92)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$4(StreamingService.java:164)
	at java.base/java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1603)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$5(StreamingService.java:162)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-05 07:51:48.412 [http-nio-8080-exec-4] DEBUG o.s.web.context.request.async.WebAsyncManager - Async result set for "/ai/stream/connect"
2025-07-05 07:51:48.412 [http-nio-8080-exec-4] DEBUG o.s.web.context.request.async.WebAsyncManager - Performing async dispatch for "/ai/stream/connect"
2025-07-05 07:51:48.413 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - "ASYNC" dispatch for GET "/ai/stream/connect?sessionId=session_1751672931251", parameters={masked}
2025-07-05 07:51:48.414 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - Resume with async result [java.io.IOException: 你的主机中的软件中止了一个已建立的连接。]
2025-07-05 07:51:48.419 [http-nio-8080-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet - Unresolved failure from "ASYNC" dispatch: java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
2025-07-05 07:51:48.419 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[localhost].[/].[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] threw exception
java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:542)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:125)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1411)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:732)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:698)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:683)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:574)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:156)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:216)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1271)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:408)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:300)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:266)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:133)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.flush(StandardServletAsyncWebRequest.java:415)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:137)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:235)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:310)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.send(ResponseBodyEmitterReturnValueHandler.java:297)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:226)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:217)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at com.example.agent.pipeline.streaming.StreamingService.sendEvent(StreamingService.java:92)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$4(StreamingService.java:164)
	at java.base/java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1603)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$5(StreamingService.java:162)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-05 07:51:48.421 [http-nio-8080-exec-4] INFO  c.e.agent.pipeline.streaming.StreamingService - SSE connection completed for session: session_1751672931251
2025-07-05 07:51:48.423 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[localhost].[/].[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
java.io.IOException: 你的主机中的软件中止了一个已建立的连接。
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:542)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:125)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1411)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:732)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:698)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:683)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:574)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:156)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:216)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1271)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:408)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:300)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:266)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:133)
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.flush(StandardServletAsyncWebRequest.java:415)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:137)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:235)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:310)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$DefaultSseEmitterHandler.send(ResponseBodyEmitterReturnValueHandler.java:297)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:226)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:217)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at com.example.agent.pipeline.streaming.StreamingService.sendEvent(StreamingService.java:92)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$4(StreamingService.java:164)
	at java.base/java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1603)
	at com.example.agent.pipeline.streaming.StreamingService.lambda$startHeartbeat$5(StreamingService.java:162)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-07-05 07:58:16.960 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-07-05 07:58:16.962 [Thread-11] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:58:16.963 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:58:16.966 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:58:16.967 [Thread-11] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-07-05 07:58:16.993 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-07-05 07:58:16.997 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-07-05 07:58:16.998 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-05 07:58:17.000 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-05 07:58:17.257 [restartedMain] INFO  com.example.agent.app.AgentApplication - Starting AgentApplication using Java 21.0.7 with PID 12996 (C:\my\work\rag\agent-app\target\classes started by zhoukang in C:\my\work\rag)
2025-07-05 07:58:17.264 [restartedMain] DEBUG com.example.agent.app.AgentApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-05 07:58:17.265 [restartedMain] INFO  com.example.agent.app.AgentApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-05 07:58:18.126 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-05 07:58:18.128 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-07-05 07:58:18.128 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-07-05 07:58:18.130 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-05 07:58:18.202 [restartedMain] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-05 07:58:18.202 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 923 ms
2025-07-05 07:58:18.323 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-07-05 07:58:18.325 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn15: url=jdbc:h2:mem:agent_knowledge user=SA
2025-07-05 07:58:18.325 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-07-05 07:58:18.540 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: standard, 名称: 标准处理链, 步骤数: 4
2025-07-05 07:58:18.541 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: quick, 名称: 快速处理链, 步骤数: 3
2025-07-05 07:58:18.541 [restartedMain] INFO  com.example.agent.pipeline.chain.PipelineChain - 责任链构建完成 - ID: knowledge-enhanced, 名称: 知识增强处理链, 步骤数: 4
2025-07-05 07:58:18.541 [restartedMain] INFO  c.e.agent.pipeline.service.AgentPipelineService - AgentPipelineService 初始化完成，预定义处理链数量: 3
2025-07-05 07:58:18.603 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 5 mappings in 'requestMappingHandlerMapping'
2025-07-05 07:58:18.614 [restartedMain] DEBUG o.s.w.s.function.support.RouterFunctionMapping - 1 RouterFunction(s) in 'routerFunctionMapping'
2025-07-05 07:58:18.616 [restartedMain] DEBUG o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-07-05 07:58:18.620 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-07-05 07:58:18.626 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-07-05 07:58:18.629 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable tools capabilities, notification: true
2025-07-05 07:58:18.630 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable resources capabilities, notification: true
2025-07-05 07:58:18.631 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable prompts capabilities, notification: true
2025-07-05 07:58:18.631 [restartedMain] INFO  o.s.a.m.s.autoconfigure.McpServerAutoConfiguration - Enable completions capabilities
2025-07-05 07:58:18.682 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-07-05 07:58:18.683 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn20: url=jdbc:h2:mem:vector_db user=SA
2025-07-05 07:58:18.684 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-07-05 07:58:18.684 [restartedMain] INFO  o.s.b.autoconfigure.h2.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Databases available at 'jdbc:h2:mem:agent_knowledge', 'jdbc:h2:mem:vector_db'
2025-07-05 07:58:18.694 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-07-05 07:58:18.706 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-07-05 07:58:18.711 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-05 07:58:18.718 [restartedMain] INFO  com.example.agent.app.AgentApplication - Started AgentApplication in 1.644 seconds (process running for 573.534)
2025-07-05 07:58:18.721 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-07-05 07:59:10.074 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-05 07:59:10.079 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-05 07:59:10.083 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-07-05 07:59:10.084 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-07-05 07:59:10.084 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-07-05 07:59:10.085 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
